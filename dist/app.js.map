{"version":3,"sources":["webpack:///dist/app.js","webpack:///webpack/bootstrap b1c5bce18c8d2236ecc7","webpack:///./js/content.js","webpack:///./js/lazyload.js","webpack:///./js/app.js","webpack:///./js/recommend.js","webpack:///./js/slider.js","webpack:///./js/tab.js","webpack:///./js/toplist.js","webpack:///./js/search.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","RECOMMEND_URL","TOPLIST_URL","SEARCH_URL","LYRICS_URL","lazyload","imgs","Array","from","document","querySelectorAll","window","observer","IntersectionObserver","changes","forEach","change","intersectionRatio","loadImage","target","unobserve","img","observe","onscroll","throttle","filter","classList","contains","isVisible","length","removeEventListener","addEventListener","dispatchEvent","Event","func","wait","context","args","timer","prev","fn","now","Date","diff","this","arguments","apply","clearTimeout","setTimeout","_img$getBoundingClien","getBoundingClientRect","top","left","right","bottom","windowWidth","documentElement","clientWidth","windowHeight","clientHeight","callback","image","Image","src","dataset","onload","remove","toString","_recommend","_tab","_toplist","obj","_search","Recommend","querySelector","start","TopList","Search","search","_classCallCheck","instance","Constructor","TypeError","undefined","_createClass","defineProperties","props","descriptor","writable","key","protoProps","staticProps","_content","_slider","_lazyload","el","_this2","fetch","then","res","json","render","xhr","_this","XMLHttpRequest","ActiveXObject","open","send","onreadystatechange","readyState","status","JSON","parse","responseText","console","log","add","renderSlider","data","slider","renderRadios","radioList","renderPlayList","songList","slides","Slider","map","slide","link","linkUrl","picUrl","radios","innerHTML","radio","Ftitle","join","playlists","list","accessnum","toFixed","songListDesc","options","interval","index","touchX","ready_moved","bindEvent","dots","wrap","firstElementChild","style","width","setInterval","next","bind","autoPlay","transform","setActiveDot","len","children","b","getElementsByTagName","touchstart","touchend","e","touch","targetTouches","clientX","release","changedTouches","releasedAt","pre","clearInterval","event","role","parentElement","tab","content","view","child","display","topList","_this3","item","id","replace","topTitle","songlist","songs","song","songname","singername","input","onEnter","songsObject","keyword","page","isLoad","fetching","onScroll","trim","reset","keyCode","pageYOffset","body","scrollHeight","loading","handleSearchUrl","curpage","message","append","accomplish","catch","html","artist","singer","songid","albummid","insertAdjacentHTML"],"mappings":"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","file":"dist/app.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar RECOMMEND_URL = exports.RECOMMEND_URL = 'https://qq-music-api.now.sh';\nvar TOPLIST_URL = exports.TOPLIST_URL = 'https://qq-music-api.now.sh/top';\nvar SEARCH_URL = exports.SEARCH_URL = 'https://qq-music-api.now.sh/search';\nvar LYRICS_URL = exports.LYRICS_URL = 'https://qq-music-api.now.sh/lyrics';\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.lazyload = lazyload;\nfunction lazyload() {\n    var imgs = Array.from(document.querySelectorAll('.lazyload'));\n    //判断浏览器是否有IntersectionObserver\n    if ('IntersectionObserver' in window) {\n        var observer = new IntersectionObserver(function (changes) {\n            changes.forEach(function (change) {\n                if (change.intersectionRatio > 0) {\n                    loadImage(change.target, function () {\n                        observer.unobserve(change.target);\n                    });\n                }\n            });\n        });\n        imgs.forEach(function (img) {\n            observer.observe(img);\n        });\n    } else {\n        var onscroll = throttle(function () {\n            imgs = imgs.filter(function (img) {\n                return img.classList.contains('lazyload');\n            });\n            imgs.forEach(function (img) {\n                return isVisible(img) && loadImage(img);\n            });\n            //如果图片到没有了，移除监听事件提高性能\n            if (imgs.length === 0) {\n                window.removeEventListener('scroll', onscroll);\n            }\n            imgs.forEach(function (img) {\n                return isVisible(img) && loadImage(img);\n            });\n        }, 300);\n        window.addEventListener('scroll', onscroll);\n        window.dispatchEvent(new Event('scroll'));\n    }\n}\n\n/**\n * @description 节流\n * @param {any} func 函数\n * @param {any} wait 时间\n * @returns \n */\nfunction throttle(func, wait) {\n    var context = void 0,\n        args = void 0,\n        timer = void 0;\n    var prev = 0;\n    return function fn() {\n        var now = +new Date();\n        var diff = now - prev;\n        context = this;\n        args = arguments;\n        if (!prev || diff >= wait) {\n            func.apply(context, args);\n            prev = now;\n        } else if (diff < wait) {\n            clearTimeout(timer);\n            timer = setTimeout(fn, wait - diff);\n        }\n    };\n}\n/**\n * @description 判断元素是否可见\n * @param {any} img \n * @returns \n */\nfunction isVisible(img) {\n    var _img$getBoundingClien = img.getBoundingClientRect(),\n        top = _img$getBoundingClien.top,\n        left = _img$getBoundingClien.left,\n        right = _img$getBoundingClien.right,\n        bottom = _img$getBoundingClien.bottom;\n\n    var windowWidth = document.documentElement.clientWidth;\n    var windowHeight = document.documentElement.clientHeight;\n    return (top > 0 && top < windowHeight || bottom > 0 && bottom < windowHeight) && (left > 0 && left < windowWidth || right > 0 && right < windowWidth);\n}\n\n/**\n * @description 加载图片\n * @param {any} img \n * @param {any} callback \n */\nfunction loadImage(img, callback) {\n    var image = new Image();\n    image.src = img.dataset.src;\n    image.onload = function () {\n        img.src = image.src;\n        img.classList.remove('lazyload');\n        if (Object.prototype.toString.call(callback) === '[object Function]') {\n            callback();\n        }\n    };\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _recommend = __webpack_require__(3);\n\nvar _tab = __webpack_require__(5);\n\nvar _tab2 = _interopRequireDefault(_tab);\n\nvar _toplist = __webpack_require__(6);\n\nvar _search = __webpack_require__(7);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar x = new _recommend.Recommend(document.querySelector('.rec-view')).start();\n\nvar y = new _toplist.TopList(document.querySelector('.rank-view')).start();\n\nvar z = new _search.Search().search();\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Recommend = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _content = __webpack_require__(0);\n\nvar _slider = __webpack_require__(4);\n\nvar _lazyload = __webpack_require__(1);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Recommend = exports.Recommend = function () {\n    function Recommend(el) {\n        _classCallCheck(this, Recommend);\n\n        this.el = el;\n    }\n\n    /**\n     * @description 开始\n     * @memberof Recommend\n     */\n\n\n    _createClass(Recommend, [{\n        key: 'start',\n        value: function start() {\n            var _this2 = this;\n\n            if ('fetch' in window) {\n                fetch(_content.RECOMMEND_URL).then(function (res) {\n                    return res.json();\n                }).then(function (json) {\n                    return _this2.json = json;\n                }).then(function () {\n                    return _this2.render();\n                });\n            } else {\n                //如果不兼容 fetch\n                var xhr = void 0;\n                var _this = this;\n                if (window.XMLHttpRequest) {\n                    xhr = new XMLHttpRequest();\n                } else {\n                    //兼容 ie6\n                    xhr = new ActiveXObject('Microsoft.XMLHTTP');\n                }\n                //连接\n                xhr.open('GET', _content.RECOMMEND_URL, true);\n                //发送请求\n                xhr.send();\n\n                xhr.onreadystatechange = function () {\n                    //读取完成\n                    if (xhr.readyState === 4) {\n                        if (xhr.status === 200) {\n                            _this.json = JSON.parse(xhr.responseText);\n                            _this.render();\n                        } else {\n                            console.log('失败' + xhr.status);\n                        }\n                    }\n                };\n            }\n        }\n        /**\n         * @description 渲染数据\n         * @memberof Recommend\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            document.querySelector('.loading').classList.add('hide');\n            this.renderSlider(this.json.data.slider);\n            this.renderRadios(this.json.data.radioList);\n            this.renderPlayList(this.json.data.songList);\n            (0, _lazyload.lazyload)();\n        }\n        /**\n         * @description 渲染轮播图\n         * @param {any} slides \n         * @memberof Recommend\n         */\n\n    }, {\n        key: 'renderSlider',\n        value: function renderSlider(slides) {\n            this.slider = new _slider.Slider({\n                el: this.el.querySelector('#slider'),\n                slides: slides.map(function (slide) {\n                    return {\n                        link: slide.linkUrl,\n                        image: slide.picUrl\n                    };\n                })\n            });\n        }\n\n        /**\n         * @description 渲染电台部分\n         * @param {any} radios \n         * @memberof Recommend\n         */\n\n    }, {\n        key: 'renderRadios',\n        value: function renderRadios(radios) {\n            document.querySelector('.radios .list').innerHTML = radios.map(function (radio) {\n                return '<div class=\"list-item\">\\n                <div class=\"list-media\">\\n                    <img data-src=\"' + radio.picUrl + '\" class=\"lazyload\">\\n                    <span class=\"icon icon_play\"></span>\\n                </div>\\n                <div class=\"list-info\">' + radio.Ftitle + '</div>\\n            </div>';\n            }).join('');\n        }\n\n        /**\n         * @description 渲染推荐页的热门歌单\n         * @param {any} playlists \n         * @memberof Recommend\n         */\n\n    }, {\n        key: 'renderPlayList',\n        value: function renderPlayList(playlists) {\n            document.querySelector('.playlists .list').innerHTML = playlists.map(function (list) {\n                return '<div class=\"list-item\">\\n            <div class=\"list-media\">\\n                <img class=\"lazyload\" data-src=\"' + list.picUrl + '\">\\n                <span class=\"listen_count\"><span class=\"icon icon_listen\"></span>' + ((list.accessnum / 10000).toFixed(1) + '万') + '</span>\\n                <span class=\"icon icon_play\"></span>\\n            </div>\\n            <div class=\"list-info\">\\n                <div class=\"list_tit\">' + list.songListDesc + '</div>\\n                <div class=\"list-text\"></div>\\n            </div>\\n        </div>';\n            }).join('');\n        }\n    }]);\n\n    return Recommend;\n}();\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Slider = exports.Slider = function () {\n    function Slider() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, Slider);\n\n        this.el = options.el;\n        this.slides = options.slides;\n        this.interval = options.interval || 3000;\n        this.index = 0;\n        this.touchX = 0; //触控开始的手指最初落点\n        this.ready_moved = true; //判断每次滑动开始的标记变量\n        this.render();\n        this.bindEvent();\n        this.start();\n    }\n\n    /**\n     * @description 渲染\n     * @memberof Slider\n     */\n\n\n    _createClass(Slider, [{\n        key: 'render',\n        value: function render() {\n            this.el.innerHTML = '<div class=\"qq-slider-wrap\"></div>\\n        <p class=\"ui-slider-dots\">\\n        <b class=\"active\"></b>\\n        <b class=\"\"></b>\\n        <b class=\"\"></b>\\n        <b class=\"\"></b>\\n        <b class=\"\"></b>\\n        </p>';\n            this.dots = document.querySelector('.ui-slider-dots');\n            this.wrap = this.el.firstElementChild;\n            this.wrap.style.width = this.slides.length * 100 + '%';\n            this.wrap.innerHTML = this.slides.map(function (slide) {\n                return '<div class=\"qq-slider-item\">\\n          <a href=\"' + slide.link + '\">\\n            <img src=\"' + slide.image + '\">\\n          </a>\\n      </div>';\n            }).join('');\n        }\n\n        /**\n         * @description 自动播放\n         * @memberof Slider\n         */\n\n    }, {\n        key: 'autoPlay',\n        value: function autoPlay() {\n            this.timer = setInterval(this.next.bind(this), this.interval);\n        }\n\n        /**\n         * @description 开始播放\n         * @memberof Slider\n         */\n\n    }, {\n        key: 'start',\n        value: function start() {\n            this.autoPlay();\n        }\n\n        /**\n         * @description 下一张\n         * @returns \n         * @memberof Slider\n         */\n\n    }, {\n        key: 'next',\n        value: function next() {\n            this.index += 1;\n            if (this.index % this.slides.length === 0) {\n                this.wrap.style.transform = 'translate(0)';\n                this.index = 0;\n                this.setActiveDot();\n                return;\n            }\n            this.wrap.style.transform = 'translate(-' + this.index * 100 / this.slides.length + '%)';\n            this.setActiveDot();\n        }\n\n        /**\n         * @description 上一张\n         * @returns \n         * @memberof Slider\n         */\n\n    }, {\n        key: 'pre',\n        value: function pre() {\n            if (this.index - 1 < 0) {\n                this.index = this.slides.length + this.index - 1;\n            } else {\n                this.index -= 1;\n            }\n            if (this.index % this.slides.length === 0) {\n                this.wrap.style.transform = 'translate(0)';\n                this.index = 0;\n                this.setActiveDot();\n                return;\n            }\n            this.wrap.style.transform = 'translate(-' + (this.slides.length + this.index) % this.slides.length * 100 / this.slides.length + '%)';\n            this.setActiveDot();\n        }\n        /**\n         * @description 设置激活的小点\n         * @memberof Slider\n         */\n\n    }, {\n        key: 'setActiveDot',\n        value: function setActiveDot() {\n            var len = this.dots.children.length;\n            for (var i = 0; i < len; i++) {\n                var b = document.getElementsByTagName('b')[i];\n                b.classList.remove('active');\n                if (this.index === i) {\n                    b.classList.add('active');\n                }\n            }\n        }\n\n        /**\n         * @description 绑定事件\n         * @memberof Slider\n         */\n\n    }, {\n        key: 'bindEvent',\n        value: function bindEvent() {\n            this.wrap.addEventListener('touchstart', this.touchstart.bind(this));\n            this.wrap.addEventListener('touchend', this.touchend.bind(this));\n        }\n        /**\n         * @description touchstart事件\n         * @param {any} e \n         * @memberof Slider\n         */\n\n    }, {\n        key: 'touchstart',\n        value: function touchstart(e) {\n            if (this.ready_moved) {\n                var touch = e.targetTouches[0];\n                this.touchX = touch.clientX;\n                this.ready_moved = false;\n            }\n        }\n\n        /**\n         * @description touchend事件\n         * @param {any} e \n         * @memberof Slider\n         */\n\n    }, {\n        key: 'touchend',\n        value: function touchend(e) {\n            var touchX = this.touchX;\n            var _this = this;\n            if (!_this.ready_moved) {\n                var release = e.changedTouches[0];\n                var releasedAt = release.clientX;\n                var diff = releasedAt - _this.touchX;\n                if (diff > 50) {\n                    _this.pre();\n                    clearInterval(_this.timer);\n                    this.autoPlay();\n                    _this.ready_moved = true;\n                } else if (diff < -50) {\n                    _this.next();\n                    clearInterval(_this.timer);\n                    this.autoPlay();\n                    _this.ready_moved = true;\n                }\n            }\n        }\n    }]);\n\n    return Slider;\n}();\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\ndocument.addEventListener('touchstart', function (event) {\n    var target = event.target;\n    if (target.dataset.role !== 'tab') return;\n    [].forEach.call(target.parentElement.children, function (tab) {\n        tab.classList.remove('active');\n    });\n    target.classList.add('active');\n    var content = document.querySelector(target.dataset.view);\n    if (content) {\n        [].forEach.call(content.parentElement.children, function (child) {\n            child.style.display = 'none';\n        });\n        content.style.display = 'block';\n    }\n});\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.TopList = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _content = __webpack_require__(0);\n\nvar _lazyload = __webpack_require__(1);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar TopList = exports.TopList = function () {\n    function TopList(el) {\n        _classCallCheck(this, TopList);\n\n        this.el = el;\n    }\n    /**\n     * @description 开始\n     * @memberof TopList\n     */\n\n\n    _createClass(TopList, [{\n        key: 'start',\n        value: function start() {\n            var _this2 = this;\n\n            if ('fetch' in window) {\n                fetch(_content.TOPLIST_URL).then(function (res) {\n                    return res.json();\n                }).then(function (json) {\n                    return _this2.list = json.data.topList;\n                }).then(function () {\n                    return _this2.render();\n                });\n            } else {\n                var xhr = void 0;\n                var _this = this;\n                if (window.XMLHttpRequest) {\n                    xhr = new XMLHttpRequest();\n                } else {\n                    xhr = new ActiveXObject('Microsoft.XMLHTTP');\n                }\n                xhr.open('GET', _content.TOPLIST_URL, true);\n                xhr.send();\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState === 4) {\n                        if (xhr.status === 200) {\n                            _this.json = JSON.parse(xhr.responseText);\n                            _this.render();\n                        } else {\n                            console.log('失败' + xhr.status);\n                        }\n                    }\n                };\n            }\n        }\n\n        /**\n         * @description 渲染\n         * @memberof TopList\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this3 = this;\n\n            document.querySelector('.toplist').innerHTML = this.list.map(function (item) {\n                return '<li class=\"top-item\">\\n        <div class=\"top-item-media\">\\n          <a href=\\'https://y.qq.com/w/toplist.html?ADTAG=myqq&from=myqq&channel=10007100&id=' + item.id + '&type=top\\'>\\n            <img class=\"lazyload\" data-src=\"' + item.picUrl.replace('http://', 'https://') + '\">\\n          </a>\\n        </div>\\n        <a href=\\'https://y.qq.com/w/toplist.html?ADTAG=myqq&from=myqq&channel=10007100&id=' + item.id + '&type=top\\'>\\n            <div class=\"top-item-info\">\\n            <h3 class=\"top-item-title ellipsis\">' + item.topTitle + '</h3>\\n            <ul class=\"top-item-list\">' + _this3.songlist(item.songList) + '</ul>\\n            </div>\\n        </a>\\n      </li>';\n            }).join('');\n            (0, _lazyload.lazyload)(this.el.querySelectorAll('.lazyload'));\n        }\n\n        /**\n         * @description 获取歌\n         * @param {any} songs 返回字符串\n         * @returns \n         * @memberof TopList\n         */\n\n    }, {\n        key: 'songlist',\n        value: function songlist(songs) {\n            return songs.map(function (song, i) {\n                return '<li class=\"top-item-song\">\\n        <i class=\"song-index\">' + (i + 1) + '</i>\\n        <span class=\"song-name\">' + song.songname + '</span>- ' + song.singername + '\\n      </li>';\n            }).join('');\n        }\n    }]);\n\n    return TopList;\n}();\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Search = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _content = __webpack_require__(0);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Search = exports.Search = function () {\n    function Search() {\n        _classCallCheck(this, Search);\n\n        this.input = document.querySelector('#search');\n        this.input.addEventListener('keyup', this.onEnter.bind(this));\n        this.songs = document.querySelector('.song-list');\n        this.songsObject = {}; //存放歌曲\n        this.keyword = ''; //输入搜索的值\n        this.page = 1; //默认页数为1\n        this.isLoad = true; //能否继续加载数据\n        this.fetching = false; //正在 fetch\n        window.addEventListener('scroll', this.onScroll.bind(this));\n    }\n\n    /**\n     * @description enter 事件\n     * @param {any} event \n     * @returns \n     * @memberof Search\n     */\n\n\n    _createClass(Search, [{\n        key: 'onEnter',\n        value: function onEnter(event) {\n            //获取输入的值,并且去除两边的空格\n            var keyword = event.target.value.trim();\n            //如果为空，去除显示的歌\n            if (!keyword) return this.reset();\n            //如果不是 enter 直接返回\n            if (event.keyCode !== 13) return;\n            this.search(keyword);\n        }\n\n        /**\n         * @description 重置\n         * @memberof Search\n         */\n\n    }, {\n        key: 'reset',\n        value: function reset() {\n            this.page = 1;\n            this.keyword = '';\n            this.isLoad = true;\n            this.songsObject = {};\n            this.songs.innerHTML = '';\n            document.querySelector('.loading-icon').style.display = 'block';\n            document.querySelector('.loading-text').style.display = 'block';\n            document.querySelector('.loading-done').style.display = 'none';\n            document.querySelector('.search-loading').classList.remove('show');\n        }\n\n        /**\n         * @description 滚动事件\n         * @param {any} e \n         * @returns \n         * @memberof Search\n         */\n\n    }, {\n        key: 'onScroll',\n        value: function onScroll(e) {\n            if (this.isLoad) {\n                if (document.documentElement.clientHeight + pageYOffset > document.body.scrollHeight - 100) {\n                    this.search(this.keyword, this.page + 1);\n                }\n            } else {\n                return window.removeEventListener('scroll', this.onScroll.bind(this));\n            }\n        }\n\n        /**\n         * @description  处理搜索的 url\n         * @param {any} keyword 用户输入的数据\n         * @param {number} [page=1]  页数默认为1\n         * @returns url\n         * @memberof Search\n         */\n\n    }, {\n        key: 'handleSearchUrl',\n        value: function handleSearchUrl(keyword) {\n            var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n            return _content.SEARCH_URL + '?keyword=' + keyword + '&page=' + page;\n        }\n\n        /**\n         * @description 搜索\n         * @param {any} keyword 用户输入的数据\n         * @param {any} page 页数\n         * @memberof Search\n         */\n\n    }, {\n        key: 'search',\n        value: function search(keyword, page) {\n            var _this = this;\n\n            //刚进来时 keyword为 undefined ，因为没有 enter\n            if (keyword === undefined) keyword = '';\n            //如果已经搜索过，并且没有改动 keyword 那么直接返回\n            if (this.keyword === keyword && this.songsObject[page || this.page]) return;\n            if (this.keyword !== keyword) this.reset();\n            if (this.fetching || !this.isLoad) return;\n            this.keyword = keyword;\n            this.loading();\n            fetch(this.handleSearchUrl(this.keyword, page || this.page)).then(function (res) {\n                return res.json();\n            }).then(function (json) {\n                _this.page = json.data.song.curpage;\n                _this.songsObject[_this.page] = json.data.song.list;\n                _this.isLoad = json.message !== 'no results';\n                return json.data.song.list;\n            }).then(function (songs) {\n                return _this.append(songs);\n            }).then(function () {\n                return _this.accomplish();\n            }).catch(function () {\n                return console.log('error');\n            });\n        }\n\n        /**\n         * @description 添加歌曲的html到页面\n         * @param {any} songs \n         * @memberof Search\n         */\n\n    }, {\n        key: 'append',\n        value: function append(songs) {\n            var html = songs.map(function (song) {\n                var artist = song.singer.map(function (s) {\n                    return s.name;\n                }).join('');\n                return '<a class=\"song-item\"\\n               href=\"#player?artist=' + artist + '&songid=' + song.songid + '&songname=' + song.songname + '&albummid=' + song.albummid + '&duration=' + song.interval + '\">\\n              <i class=\"icon icon-music\"></i>\\n              <div class=\"song-name\">' + song.songname + '</div>\\n              <div class=\"song-artist\">' + artist + '</div>\\n            </a>';\n            }).join('');\n            this.songs.insertAdjacentHTML('beforeend', html);\n        }\n\n        /**\n        * @description 函数加载\n        * @memberof Search\n        */\n\n    }, {\n        key: 'loading',\n        value: function loading() {\n            this.fetching = true;\n            document.querySelector('.search-loading').classList.add('show');\n        }\n\n        /**\n         * @description 函数加载完成\n         * @memberof Search\n         */\n\n    }, {\n        key: 'accomplish',\n        value: function accomplish() {\n            this.fetching = false;\n            if (!this.isLoad) {\n                //如果不能加载了，就显示已加载全部\n                document.querySelector('.loading-icon').style.display = 'none';\n                document.querySelector('.loading-text').style.display = 'none';\n                document.querySelector('.loading-done').style.display = 'block';\n            } else {\n                document.querySelector('.search-loading').classList.remove('show');\n            }\n        }\n    }]);\n\n    return Search;\n}();\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist/app.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b1c5bce18c8d2236ecc7","export const RECOMMEND_URL = 'https://qq-music-api.now.sh'\nexport const TOPLIST_URL = 'https://qq-music-api.now.sh/top'\nexport const SEARCH_URL = 'https://qq-music-api.now.sh/search'\nexport const LYRICS_URL = 'https://qq-music-api.now.sh/lyrics'\n\n\n// WEBPACK FOOTER //\n// ./js/content.js","export function lazyload() {\n    let imgs = Array.from(document.querySelectorAll('.lazyload'));\n    //判断浏览器是否有IntersectionObserver\n    if ('IntersectionObserver' in window) {\n        let observer = new IntersectionObserver(function(changes) {\n            changes.forEach(change => {\n                if (change.intersectionRatio > 0) {\n                    loadImage(change.target, () => {\n                        observer.unobserve(change.target);\n                    });\n                }\n            });\n        });\n        imgs.forEach(img => {\n            observer.observe(img);\n        });\n    } else {\n        let onscroll = throttle(function() {\n            imgs = imgs.filter(img => img.classList.contains('lazyload'));\n            imgs.forEach(img => isVisible(img) && loadImage(img));\n            //如果图片到没有了，移除监听事件提高性能\n            if (imgs.length === 0) {\n                window.removeEventListener('scroll', onscroll);\n            }\n            imgs.forEach(img => isVisible(img) && loadImage(img));\n        }, 300);\n        window.addEventListener('scroll', onscroll);\n        window.dispatchEvent(new Event('scroll'));\n    }\n}\n\n/**\n * @description 节流\n * @param {any} func 函数\n * @param {any} wait 时间\n * @returns \n */\nfunction throttle(func, wait) {\n    let context, args, timer;\n    let prev = 0;\n    return function fn() {\n        let now = +new Date();\n        let diff = now - prev;\n        context = this;\n        args = arguments;\n        if (!prev || diff >= wait) {\n            func.apply(context, args);\n            prev = now;\n        } else if (diff < wait) {\n            clearTimeout(timer);\n            timer = setTimeout(fn, wait - diff);\n        }\n    };\n}\n/**\n * @description 判断元素是否可见\n * @param {any} img \n * @returns \n */\nfunction isVisible(img) {\n    let { top, left, right, bottom } = img.getBoundingClientRect();\n    let windowWidth = document.documentElement.clientWidth;\n    let windowHeight = document.documentElement.clientHeight;\n    return (\n        ((top > 0 && top < windowHeight) || (bottom > 0 && bottom < windowHeight)) &&\n        ((left > 0 && left < windowWidth) || (right > 0 && right < windowWidth))\n    );\n}\n\n/**\n * @description 加载图片\n * @param {any} img \n * @param {any} callback \n */\nfunction loadImage(img, callback) {\n    let image = new Image();\n    image.src = img.dataset.src;\n    image.onload = () => {\n        img.src = image.src;\n        img.classList.remove('lazyload');\n        if (Object.prototype.toString.call(callback) === '[object Function]') {\n            callback();\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/lazyload.js","\nimport {Recommend} from './recommend.js'\nimport tab from './tab'\nimport {TopList} from './toplist.js'\nimport {Search} from './search'\nlet x = new Recommend(document.querySelector('.rec-view')).start()\n\nlet y = new TopList(document.querySelector('.rank-view')).start()\n\nlet z = new Search().search();\n\n\n// WEBPACK FOOTER //\n// ./js/app.js","import { RECOMMEND_URL } from './content.js';\nimport { Slider } from './slider.js';\nimport { lazyload } from './lazyload.js';\nexport class Recommend {\n    constructor(el) {\n        this.el = el;\n    }\n\n    /**\n     * @description 开始\n     * @memberof Recommend\n     */\n    start() {\n        if ('fetch' in window) {\n            fetch(RECOMMEND_URL)\n                .then(res => res.json())\n                .then(json => (this.json = json))\n                .then(() => this.render());\n        } else {\n            //如果不兼容 fetch\n            let xhr;\n            let _this = this;\n            if (window.XMLHttpRequest) {\n                xhr = new XMLHttpRequest();\n            } else {\n                //兼容 ie6\n                xhr = new ActiveXObject('Microsoft.XMLHTTP');\n            }\n            //连接\n            xhr.open('GET', RECOMMEND_URL, true);\n            //发送请求\n            xhr.send();\n\n            xhr.onreadystatechange = function() {\n                //读取完成\n                if (xhr.readyState === 4) {\n                    if (xhr.status === 200) {\n                        _this.json = JSON.parse(xhr.responseText);\n                        _this.render();\n                    } else {\n                        console.log('失败' + xhr.status);\n                    }\n                }\n            };\n        }\n    }\n    /**\n     * @description 渲染数据\n     * @memberof Recommend\n     */\n    render() {\n        document.querySelector('.loading').classList.add('hide');\n        this.renderSlider(this.json.data.slider);\n        this.renderRadios(this.json.data.radioList);\n        this.renderPlayList(this.json.data.songList);\n        lazyload();\n    }\n    /**\n     * @description 渲染轮播图\n     * @param {any} slides \n     * @memberof Recommend\n     */\n    renderSlider(slides) {\n        this.slider = new Slider({\n            el: this.el.querySelector('#slider'),\n            slides: slides.map(slide => ({\n                link: slide.linkUrl,\n                image: slide.picUrl\n            }))\n        });\n    }\n\n    /**\n     * @description 渲染电台部分\n     * @param {any} radios \n     * @memberof Recommend\n     */\n    renderRadios(radios) {\n        document.querySelector('.radios .list').innerHTML = radios.map(radio => `<div class=\"list-item\">\n                <div class=\"list-media\">\n                    <img data-src=\"${radio.picUrl}\" class=\"lazyload\">\n                    <span class=\"icon icon_play\"></span>\n                </div>\n                <div class=\"list-info\">${radio.Ftitle}</div>\n            </div>`).join('');\n    }\n\n    /**\n     * @description 渲染推荐页的热门歌单\n     * @param {any} playlists \n     * @memberof Recommend\n     */\n    renderPlayList(playlists) {\n        document.querySelector('.playlists .list').innerHTML = playlists.map(list => `<div class=\"list-item\">\n            <div class=\"list-media\">\n                <img class=\"lazyload\" data-src=\"${list.picUrl}\">\n                <span class=\"listen_count\"><span class=\"icon icon_listen\"></span>${(list.accessnum / 10000).toFixed(1) +\n                    '万'}</span>\n                <span class=\"icon icon_play\"></span>\n            </div>\n            <div class=\"list-info\">\n                <div class=\"list_tit\">${list.songListDesc}</div>\n                <div class=\"list-text\"></div>\n            </div>\n        </div>`).join('');\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/recommend.js","export class Slider {\n    constructor(options = {}) {\n        this.el = options.el;\n        this.slides = options.slides;\n        this.interval = options.interval || 3000;\n        this.index = 0;\n        this.touchX = 0; //触控开始的手指最初落点\n        this.ready_moved = true; //判断每次滑动开始的标记变量\n        this.render();\n        this.bindEvent();\n        this.start();\n    }\n\n    /**\n     * @description 渲染\n     * @memberof Slider\n     */\n    render() {\n        this.el.innerHTML = `<div class=\"qq-slider-wrap\"></div>\n        <p class=\"ui-slider-dots\">\n        <b class=\"active\"></b>\n        <b class=\"\"></b>\n        <b class=\"\"></b>\n        <b class=\"\"></b>\n        <b class=\"\"></b>\n        </p>`;\n        this.dots = document.querySelector('.ui-slider-dots');\n        this.wrap = this.el.firstElementChild;\n        this.wrap.style.width = `${this.slides.length * 100}%`;\n        this.wrap.innerHTML = this.slides.map(slide => `<div class=\"qq-slider-item\">\n          <a href=\"${slide.link}\">\n            <img src=\"${slide.image}\">\n          </a>\n      </div>`).join('');\n    }\n    \n    /**\n     * @description 自动播放\n     * @memberof Slider\n     */\n    autoPlay() {\n        this.timer = setInterval(this.next.bind(this), this.interval);\n    }\n    \n    /**\n     * @description 开始播放\n     * @memberof Slider\n     */\n    start() {\n        this.autoPlay();\n    }\n    \n    /**\n     * @description 下一张\n     * @returns \n     * @memberof Slider\n     */\n    next() {\n        this.index += 1;\n        if (this.index % this.slides.length === 0) {\n            this.wrap.style.transform = `translate(0)`;\n            this.index = 0;\n            this.setActiveDot();\n            return;\n        }\n        this.wrap.style.transform = `translate(-${this.index * 100 / this.slides.length}%)`;\n        this.setActiveDot();\n    }\n\n    /**\n     * @description 上一张\n     * @returns \n     * @memberof Slider\n     */\n    pre() {\n        if (this.index - 1 < 0) {\n            this.index = this.slides.length + this.index - 1;\n        } else {\n            this.index -= 1;\n        }\n        if (this.index % this.slides.length === 0) {\n            this.wrap.style.transform = `translate(0)`;\n            this.index = 0;\n            this.setActiveDot();\n            return;\n        }\n        this.wrap.style.transform = `translate(-${((this.slides.length + this.index) % this.slides.length) *\n            100 /\n            this.slides.length}%)`;\n        this.setActiveDot();\n    }\n    /**\n     * @description 设置激活的小点\n     * @memberof Slider\n     */\n    setActiveDot() {\n        let len = this.dots.children.length;\n        for (let i = 0; i < len; i++) {\n            let b = document.getElementsByTagName('b')[i];\n            b.classList.remove('active');\n            if (this.index === i) {\n                b.classList.add('active');\n            }\n        }\n    }\n\n    /**\n     * @description 绑定事件\n     * @memberof Slider\n     */\n    bindEvent() {\n        this.wrap.addEventListener('touchstart', this.touchstart.bind(this));\n        this.wrap.addEventListener('touchend', this.touchend.bind(this));\n    }\n    /**\n     * @description touchstart事件\n     * @param {any} e \n     * @memberof Slider\n     */\n    touchstart(e) {\n        if (this.ready_moved) {\n            let touch = e.targetTouches[0];\n            this.touchX = touch.clientX;\n            this.ready_moved = false;\n        }\n    }\n\n    /**\n     * @description touchend事件\n     * @param {any} e \n     * @memberof Slider\n     */\n    touchend(e) {\n        let touchX = this.touchX;\n        let _this = this;\n        if (!_this.ready_moved) {\n            let release = e.changedTouches[0];\n            let releasedAt = release.clientX;\n            let diff = releasedAt - _this.touchX;\n            if (diff > 50) {\n                _this.pre();\n                clearInterval(_this.timer);\n                this.autoPlay();\n                _this.ready_moved = true;\n            } else if (diff < -50) {\n                _this.next();\n                clearInterval(_this.timer);\n                this.autoPlay();\n                _this.ready_moved = true;\n            }\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/slider.js","document.addEventListener('touchstart', event => {\n    let target = event.target;\n    if (target.dataset.role !== 'tab') return;\n    [].forEach.call(target.parentElement.children, tab => {\n        tab.classList.remove('active');\n    });\n    target.classList.add('active');\n    let content = document.querySelector(target.dataset.view);\n    if (content) {\n        [].forEach.call(content.parentElement.children, child => {\n            child.style.display = 'none';\n        });\n        content.style.display = 'block';\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./js/tab.js","import { TOPLIST_URL } from './content';\nimport { lazyload } from './lazyload.js';\nexport class TopList {\n    constructor(el) {\n        this.el = el;\n    }\n    /**\n     * @description 开始\n     * @memberof TopList\n     */\n    start() {\n        if ('fetch' in window) {\n            fetch(TOPLIST_URL)\n                .then(res => res.json())\n                .then(json => (this.list = json.data.topList))\n                .then(() => this.render());\n        } else {\n            let xhr\n            let _this = this\n            if (window.XMLHttpRequest) {\n                xhr = new XMLHttpRequest()\n            } else {\n                xhr = new ActiveXObject('Microsoft.XMLHTTP')\n            }\n            xhr.open('GET',TOPLIST_URL,true)\n            xhr.send()\n            xhr.onreadystatechange = () => {\n                if (xhr.readyState === 4) {\n                    if (xhr.status === 200) {\n                        _this.json = JSON.parse(xhr.responseText)\n                        _this.render()\n                    } else {\n                        console.log('失败' + xhr.status)\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * @description 渲染\n     * @memberof TopList\n     */\n    render() {\n        document.querySelector('.toplist').innerHTML = this.list.map(item => `<li class=\"top-item\">\n        <div class=\"top-item-media\">\n          <a href='https://y.qq.com/w/toplist.html?ADTAG=myqq&from=myqq&channel=10007100&id=${item.id}&type=top'>\n            <img class=\"lazyload\" data-src=\"${item.picUrl.replace('http://', 'https://')}\">\n          </a>\n        </div>\n        <a href='https://y.qq.com/w/toplist.html?ADTAG=myqq&from=myqq&channel=10007100&id=${item.id}&type=top'>\n            <div class=\"top-item-info\">\n            <h3 class=\"top-item-title ellipsis\">${item.topTitle}</h3>\n            <ul class=\"top-item-list\">${this.songlist(item.songList)}</ul>\n            </div>\n        </a>\n      </li>`).join('');\n        lazyload(this.el.querySelectorAll('.lazyload'));\n    }\n\n    /**\n     * @description 获取歌\n     * @param {any} songs 返回字符串\n     * @returns \n     * @memberof TopList\n     */\n    songlist(songs) {\n        return songs.map((song,i) => `<li class=\"top-item-song\">\n        <i class=\"song-index\">${i + 1}</i>\n        <span class=\"song-name\">${song.songname}</span>- ${song.singername}\n      </li>`).join('')\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/toplist.js","import { SEARCH_URL } from './content';\n\nexport class Search {\n    constructor() {\n        this.input = document.querySelector('#search')\n        this.input.addEventListener('keyup',this.onEnter.bind(this))\n        this.songs = document.querySelector('.song-list')\n        this.songsObject = {}//存放歌曲\n        this.keyword = '' //输入搜索的值\n        this.page = 1//默认页数为1\n        this.isLoad = true //能否继续加载数据\n        this.fetching = false //正在 fetch\n        window.addEventListener('scroll',this.onScroll.bind(this))\n    }\n\n    /**\n     * @description enter 事件\n     * @param {any} event \n     * @returns \n     * @memberof Search\n     */\n    onEnter(event) {\n        //获取输入的值,并且去除两边的空格\n        let keyword = event.target.value.trim()\n        //如果为空，去除显示的歌\n        if (!keyword) return this.reset()\n        //如果不是 enter 直接返回\n        if (event.keyCode !== 13) return\n        this.search(keyword)\n    }\n\n    /**\n     * @description 重置\n     * @memberof Search\n     */\n    reset() {\n        this.page = 1\n        this.keyword = ''\n        this.isLoad = true\n        this.songsObject = {}\n        this.songs.innerHTML = ''\n        document.querySelector('.loading-icon').style.display = 'block'\n        document.querySelector('.loading-text').style.display = 'block'\n        document.querySelector('.loading-done').style.display = 'none'\n        document.querySelector('.search-loading').classList.remove('show')\n    }\n\n    /**\n     * @description 滚动事件\n     * @param {any} e \n     * @returns \n     * @memberof Search\n     */\n    onScroll(e) {\n        if (this.isLoad) {\n            if (document.documentElement.clientHeight + pageYOffset > document.body.scrollHeight - 100) {\n                this.search(this.keyword,this.page + 1)\n            }\n        } else {\n            return window.removeEventListener('scroll', this.onScroll.bind(this))\n        }\n    }\n\n    /**\n     * @description  处理搜索的 url\n     * @param {any} keyword 用户输入的数据\n     * @param {number} [page=1]  页数默认为1\n     * @returns url\n     * @memberof Search\n     */\n    handleSearchUrl(keyword,page = 1) {\n        return `${SEARCH_URL}?keyword=${keyword}&page=${page}`\n    }\n\n    /**\n     * @description 搜索\n     * @param {any} keyword 用户输入的数据\n     * @param {any} page 页数\n     * @memberof Search\n     */\n    search(keyword, page) {\n        //刚进来时 keyword为 undefined ，因为没有 enter\n        if (keyword === undefined) keyword = ''\n        //如果已经搜索过，并且没有改动 keyword 那么直接返回\n        if (this.keyword === keyword && this.songsObject[page || this.page]) return\n        if (this.keyword !== keyword) this.reset()\n        if (this.fetching || !this.isLoad) return\n        this.keyword = keyword \n        this.loading()\n        fetch(this.handleSearchUrl(this.keyword,page || this.page))\n            .then(res => res.json())\n            .then(json => {\n                this.page = json.data.song.curpage\n                this.songsObject[this.page] = json.data.song.list\n                this.isLoad = (json.message !== 'no results')\n                return json.data.song.list\n            })\n            .then(songs => this.append(songs))\n            .then(() => this.accomplish())\n            .catch(() => console.log('error'))\n    }\n\n    /**\n     * @description 添加歌曲的html到页面\n     * @param {any} songs \n     * @memberof Search\n     */\n    append(songs) {\n        let html = songs.map(song => {\n            let artist = song.singer.map(s => s.name).join('')\n            return `<a class=\"song-item\"\n               href=\"#player?artist=${artist}&songid=${song.songid}&songname=${song.songname}&albummid=${song.albummid}&duration=${song.interval}\">\n              <i class=\"icon icon-music\"></i>\n              <div class=\"song-name\">${song.songname}</div>\n              <div class=\"song-artist\">${artist}</div>\n            </a>`\n        }).join('')\n        this.songs.insertAdjacentHTML('beforeend', html)\n    }\n\n    /**\n    * @description 函数加载\n    * @memberof Search\n    */\n    loading(){\n        this.fetching = true\n        document.querySelector('.search-loading').classList.add('show')\n    }\n\n    /**\n     * @description 函数加载完成\n     * @memberof Search\n     */\n    accomplish() {\n        this.fetching = false\n        if (!this.isLoad) { //如果不能加载了，就显示已加载全部\n            document.querySelector('.loading-icon').style.display = 'none'\n            document.querySelector('.loading-text').style.display = 'none'\n            document.querySelector('.loading-done').style.display = 'block'\n        } else { \n            document.querySelector('.search-loading').classList.remove('show')\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./js/search.js"],"sourceRoot":""}