{"version":3,"sources":["webpack:///dist/app.js","webpack:///webpack/bootstrap 4517fabb20cb0544deab","webpack:///./js/content.js","webpack:///./js/lazyload.js","webpack:///./js/helper.js","webpack:///./js/app.js","webpack:///./js/recommend.js","webpack:///./js/slider.js","webpack:///./js/tab.js","webpack:///./js/toplist.js","webpack:///./js/search.js","webpack:///./js/player.js","webpack:///./js/hotkey.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","RECOMMEND_URL","TOPLIST_URL","SEARCH_URL","LYRICS_URL","HOTKEYS_URL","lazyload","imgs","Array","from","document","querySelectorAll","window","observer","IntersectionObserver","changes","forEach","change","intersectionRatio","loadImage","target","unobserve","img","observe","onscroll","throttle","filter","classList","contains","isVisible","length","removeEventListener","addEventListener","dispatchEvent","Event","func","wait","context","args","timer","prev","fn","now","Date","diff","this","arguments","apply","clearTimeout","setTimeout","_img$getBoundingClien","getBoundingClientRect","top","left","right","bottom","windowWidth","documentElement","clientWidth","windowHeight","clientHeight","callback","image","Image","src","dataset","onload","remove","toString","songUrl","id","lyricsUrl","songid","_content","albumCoverUrl","searchUrl","keyword","page","undefined","onHashChange","hash","location","test","matches","slice","indexOf","match","options","reduce","res","cur","arr","split","decodeURIComponent","player","play","hide","_recommend","_tab","_toplist","obj","_search","_player","_hotkey","Recommend","querySelector","start","HotKey","Search","search","TopList","MusicPlayer","show","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","props","descriptor","writable","key","protoProps","staticProps","_slider","_lazyload","el","_this2","fetch","then","json","render","xhr","_this","XMLHttpRequest","ActiveXObject","open","send","onreadystatechange","readyState","status","JSON","parse","responseText","console","log","add","renderSlider","data","slider","renderRadios","radioList","renderPlayList","songList","slides","Slider","map","slide","link","linkUrl","picUrl","radios","innerHTML","radio","Ftitle","join","playlists","list","accessnum","toFixed","songListDesc","interval","index","width","touchX","ready_moved","bindEvent","onresize","dots","wrap","firstElementChild","style","first","insertAdjacentHTML","domToString","node","tmpNode","createElement","appendChild","cloneNode","str","setInterval","next","bind","autoPlay","animate","setActiveDot","clearInterval","leader","offsetLeft","step","Math","ceil","floor","len","children","b","getElementsByTagName","touchstart","touchmove","touchend","e","touch","targetTouches","clientX","preventDefault","stopPropagation","move","changedTouches","moveAt","offset","abs","release","releasedAt","pre","event","role","parentElement","tab","content","view","child","display","topList","_this3","item","replace","listenCount","topTitle","songlist","songs","song","songname","singername","_helper","input","songsObject","isLoad","fetching","history","delete","cancel","hotKeys","recordKeys","onEnter","onScroll","onClick","HISTORY_KEY","localStorage","getItem","trim","reset","keyCode","addHistory","renderHistory","setItem","previousElementSibling","splice","unshift","historyHTML","pageYOffset","body","scrollHeight","loading","curpage","message","append","accomplish","catch","html","artist","singer","albummid","Progress","handleEvent","audio","createAudio","lyrics","LyricsPlayer","progress","random","restart","onPlay","onPause","innerText","duration","coverUrl","backgroundImage","className","lyric","text","err","alert","pause","$el","elapsed","$progress","$elapsed","$duration","formatTime","intervalId","update","transform","seconds","mins","secs","$lines","$audio","ontimeupdate","currentTime","getSeconds","y","LINE_HEIGHT","$active","formatText","line","p1","p2","parseFloat","div","keys","hotkey","shuffle","k","special_url","special_key","array","count","min","temp"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAI,EAAAJ,EACAK,GAAA,EACAH,WAUA,OANAJ,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,GAAA,EAGAF,EAAAD,QAvBA,GAAAD,KA4BAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,SAAAP,EAAAQ,EAAAC,GACAZ,EAAAa,EAAAV,EAAAQ,IACAG,OAAAC,eAAAZ,EAAAQ,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAZ,EAAAmB,EAAA,SAAAf,GACA,GAAAQ,GAAAR,KAAAgB,WACA,WAA2B,MAAAhB,GAAA,SAC3B,WAAiC,MAAAA,GAEjC,OADAJ,GAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAQ,EAAAC,GAAsD,MAAAR,QAAAS,UAAAC,eAAAjB,KAAAc,EAAAC,IAGtDtB,EAAAyB,EAAA,GAGAzB,IAAA0B,EAAA,KDMM,SAAUtB,EAAQD,EAASH,GAEjC,YAGAc,QAAOC,eAAeZ,EAAS,cAC7BwB,OAAO,GEzEIC,iBAAgB,uCAChBC,cAAc,0CACdC,aAAa,6CACbC,aAAa,6CACbC,cAAc,8CF+ErB,SAAU5B,EAAQD,EAASH,GAEjC,YGrFO,SAASiC,KACZ,GAAIC,GAAOC,MAAMC,KAAKC,SAASC,iBAAiB,aAEhD,IAAI,wBAA0BC,QAAQ,CAClC,GAAIC,GAAW,GAAIC,sBAAqB,SAASC,GAC7CA,EAAQC,QAAQ,SAAAC,GACRA,EAAOC,kBAAoB,GAC3BC,EAAUF,EAAOG,OAAQ,WACrBP,EAASQ,UAAUJ,EAAOG,aAK1Cb,GAAKS,QAAQ,SAAAM,GACTT,EAASU,QAAQD,SAElB,CACH,GAAIE,GAAWC,EAAS,WACpBlB,EAAOA,EAAKmB,OAAO,SAAAJ,GAAA,MAAOA,GAAIK,UAAUC,SAAS,cACjDrB,EAAKS,QAAQ,SAAAM,GAAA,MAAOO,GAAUP,IAAQH,EAAUG,KAE5B,IAAhBf,EAAKuB,QACLlB,OAAOmB,oBAAoB,SAAUP,GAEzCjB,EAAKS,QAAQ,SAAAM,GAAA,MAAOO,GAAUP,IAAQH,EAAUG,MACjD,IACHV,QAAOoB,iBAAiB,SAAUR,GAClCZ,OAAOqB,cAAc,GAAIC,OAAM,YAUvC,QAAST,GAASU,EAAMC,GACpB,GAAIC,UAASC,SAAMC,SACfC,EAAO,CACX,OAAO,SAASC,KACZ,GAAIC,IAAO,GAAIC,MACXC,EAAOF,EAAMF,CACjBH,GAAUQ,KACVP,EAAOQ,WACFN,GAAQI,GAAQR,GACjBD,EAAKY,MAAMV,EAASC,GACpBE,EAAOE,GACAE,EAAOR,IACdY,aAAaT,GACbA,EAAQU,WAAWR,EAAIL,EAAOQ,KAS1C,QAASf,GAAUP,GAAK,GAAA4B,GACe5B,EAAI6B,wBAAjCC,EADcF,EACdE,IAAKC,EADSH,EACTG,KAAMC,EADGJ,EACHI,MAAOC,EADJL,EACIK,OACpBC,EAAc9C,SAAS+C,gBAAgBC,YACvCC,EAAejD,SAAS+C,gBAAgBG,YAC5C,QACMR,EAAM,GAAKA,EAAMO,GAAkBJ,EAAS,GAAKA,EAASI,KAC1DN,EAAO,GAAKA,EAAOG,GAAiBF,EAAQ,GAAKA,EAAQE,GASnE,QAASrC,GAAUG,EAAKuC,GACpB,GAAIC,GAAQ,GAAIC,MAChBD,GAAME,IAAM1C,EAAI2C,QAAQD,IACxBF,EAAMI,OAAS,WACX5C,EAAI0C,IAAMF,EAAME,IAChB1C,EAAIK,UAAUwC,OAAO,YAC4B,sBAA7ChF,OAAOS,UAAUwE,SAASxF,KAAKiF,IAC/BA,KHOZ1E,OAAOC,eAAeZ,EAAS,cAC3BwB,OAAO,IAEXxB,EG3FgB8B,YH8LV,SAAU7B,EAAQD,EAASH,GAEjC,YI7LO,SAASgG,GAAQC,GACpB,yCAA0CA,EAA1C,kBAIG,QAASC,GAAUC,GACtB,MAAAC,GAAArE,WAAA,OAA2BoE,EAIxB,QAASE,GAAcJ,GAC1B,4DAA6DA,EAA7D,OAMG,QAASK,GAAUC,GAAmB,GAAVC,GAAU/B,UAAAhB,OAAA,OAAAgD,KAAAhC,UAAA,GAAAA,UAAA,GAAH,CACtC,OAAA2B,GAAAtE,WAAA,YAAgCyE,EAAhC,SAAgDC,EJ8KpD1F,OAAOC,eAAeZ,EAAS,cAC3BwB,OAAO,IAEXxB,EInMgB6F,UJoMhB7F,EI/LgB+F,YJgMhB/F,EI3LgBkG,gBJ4LhBlG,EIrLgBmG,WApBhB,IAAAF,GAAApG,EAAA,IJuOM,SAAUI,EAAQD,EAASH,GAEjC,YK/MA,SAAS0G,KACL,GAAIC,GAAOC,SAASD,IACpB,IAAI,cAAcE,KAAKF,GAAO,CAC1B,GAAIG,GAAUH,EAAKI,MAAMJ,EAAKK,QAAQ,KAAO,GAAGC,MAAM,kBAClDC,EAAUJ,GAAWA,EAAQK,OAAO,SAACC,EAAKC,GAC1C,GAAIC,GAAMD,EAAIE,MAAM,IAEpB,OADAH,GAAIE,EAAI,IAAME,mBAAmBF,EAAI,IAC9BF,MAGXK,GAAOC,KAAKR,OAEZO,GAAOE,OArCf,GAAAC,GAAA5H,EAAA,GACA6H,EAAA7H,EAAA,GACA8H,GLuPA,SAAgCC,GAAcA,GAAOA,EAAI3G,YAVtByG,GK7OnC7H,EAAA,IACAgI,EAAAhI,EAAA,GACAiI,EAAAjI,EAAA,GACAkI,EAAAlI,EAAA,IAUIyH,GARY,GAAAG,GAAAO,UAAc9F,SAAS+F,cAAc,cAAcC,QAEtD,GAAAH,GAAAI,OAAWjG,SAAS+F,cAAc,iBAAiBC,SAEnD,GAAAL,GAAAO,QAAaC,SAEZ,GAAAV,GAAAW,QAAYpG,SAAS+F,cAAc,cAAcC,QAElD,GAAAJ,GAAAS,YAAgBrG,SAAS+F,cAAc,YAEpD/F,UAAS+F,cAAc,gBAAgBzE,iBAAiB,QAAQ,WAC5D8D,EAAOkB,SAGXjC,IAEA/C,iBAAiB,aAAa+C,ILwQxB,SAAUtG,EAAQD,EAASH,GAEjC,YAgBA,SAAS4I,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAbhHjI,OAAOC,eAAeZ,EAAS,cAC3BwB,OAAO,IAEXxB,EAAQgI,cAAY1B,EAEpB,IAAIuC,GAAe,WAAc,QAASC,GAAiBlG,EAAQmG,GAAS,IAAK,GAAI7I,GAAI,EAAGA,EAAI6I,EAAMzF,OAAQpD,IAAK,CAAE,GAAI8I,GAAaD,EAAM7I,EAAI8I,GAAWlI,WAAakI,EAAWlI,aAAc,EAAOkI,EAAWnI,cAAe,EAAU,SAAWmI,KAAYA,EAAWC,UAAW,GAAMtI,OAAOC,eAAegC,EAAQoG,EAAWE,IAAKF,IAAiB,MAAO,UAAUL,EAAaQ,EAAYC,GAAiJ,MAA9HD,IAAYL,EAAiBH,EAAYvH,UAAW+H,GAAiBC,GAAaN,EAAiBH,EAAaS,GAAqBT,MM1ShiB1C,EAAApG,EAAA,GACAwJ,EAAAxJ,EAAA,GACAyJ,EAAAzJ,EAAA,ENkTgBG,GMjTHgI,UNiTuB,WMhThC,QAAAA,GAAYuB,GAAId,EAAApE,KAAA2D,GACZ3D,KAAKkF,GAAKA,ENmad,MAxGAV,GAAab,IACTkB,IAAK,QACL1H,MAAO,WMvTH,GAAAgI,GAAAnF,IACJ,IAAI,SAAWjC,QACXqH,uBACKC,KAAK,SAAAzC,GAAA,MAAOA,GAAI0C,SAChBD,KAAK,SAAAC,GAAA,MAASH,GAAKG,KAAOA,IAC1BD,KAAK,iBAAMF,GAAKI,eAClB,CAEH,GAAIC,UACAC,EAAQzF,IAERwF,GADAzH,OAAO2H,eACD,GAAIA,gBAGJ,GAAIC,eAAc,qBAG5BH,EAAII,KAAK,MAAThE,EAAAxE,eAA+B,GAE/BoI,EAAIK,OAEJL,EAAIM,mBAAqB,WAEE,IAAnBN,EAAIO,aACe,MAAfP,EAAIQ,QACJP,EAAMH,KAAOW,KAAKC,MAAMV,EAAIW,cAC5BV,EAAMF,UAENa,QAAQC,IAAI,KAAOb,EAAIQ,cNwUvCnB,IAAK,SACL1H,MAAO,WM9TPU,SAAS+F,cAAc,YAAY9E,UAAUwH,IAAI,QACjDtG,KAAKuG,aAAavG,KAAKsF,KAAKkB,KAAKC,QACjCzG,KAAK0G,aAAa1G,KAAKsF,KAAKkB,KAAKG,WACjC3G,KAAK4G,eAAe5G,KAAKsF,KAAKkB,KAAKK,WACnC,EAAA5B,EAAAxH,eNwUAoH,IAAK,eACL1H,MAAO,SMlUE2J,GACT9G,KAAKyG,OAAS,GAAAzB,GAAA+B,QACV7B,GAAIlF,KAAKkF,GAAGtB,cAAc,WAC1BkD,OAAQA,EAAOE,IAAI,SAAAC,GAAA,OACfC,KAAMD,EAAME,QACZlG,MAAOgG,EAAMG,eNgVrBvC,IAAK,eACL1H,MAAO,SMvUEkK,GACTxJ,SAAS+F,cAAc,iBAAiB0D,UAAYD,EAAOL,IAAI,SAAAO,GAAA,+GAElCA,EAAMH,OAF4B,gLAK9BG,EAAMC,OALwB,+BAMlDC,KAAK,ON6UlB5C,IAAK,iBACL1H,MAAO,SMtUIuK,GACX7J,SAAS+F,cAAc,oBAAoB0D,UAAYI,EAAUV,IAAI,SAAAW,GAAA,+HACiBA,EAAKlG,GADtB,8FAG3BkG,EAAKP,OAHsB,wHAIOO,EAAKC,UAAY,KAAOC,QAAQ,GAChG,kKAIoBF,EAAKG,aATgC,gHAa5DL,KAAK,QN+TX9D,MAKL,SAAU/H,EAAQD,EAASH,GAEjC,YASA,SAAS4I,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHjI,OAAOC,eAAeZ,EAAS,cAC3BwB,OAAO,GAGX,IAAIqH,GAAe,WAAc,QAASC,GAAiBlG,EAAQmG,GAAS,IAAK,GAAI7I,GAAI,EAAGA,EAAI6I,EAAMzF,OAAQpD,IAAK,CAAE,GAAI8I,GAAaD,EAAM7I,EAAI8I,GAAWlI,WAAakI,EAAWlI,aAAc,EAAOkI,EAAWnI,cAAe,EAAU,SAAWmI,KAAYA,EAAWC,UAAW,GAAMtI,OAAOC,eAAegC,EAAQoG,EAAWE,IAAKF,IAAiB,MAAO,UAAUL,EAAaQ,EAAYC,GAAiJ,MAA9HD,IAAYL,EAAiBH,EAAYvH,UAAW+H,GAAiBC,GAAaN,EAAiBH,EAAaS,GAAqBT,KAInhB3I,GO1bAoL,OP0biB,WOzb1B,QAAAA,KAA0B,GAAdrE,GAAczC,UAAAhB,OAAA,OAAAgD,KAAAhC,UAAA,GAAAA,UAAA,KAAAmE,GAAApE,KAAA+G,GACtB/G,KAAKkF,GAAKxC,EAAQwC,GAClBlF,KAAK8G,OAASpE,EAAQoE,OACtB9G,KAAK+H,SAAWrF,EAAQqF,UAAY,IACpC/H,KAAKgI,MAAQ,EACbhI,KAAKiI,MAAQ,EACbjI,KAAKkI,OAAS,EACdlI,KAAKmI,aAAc,EACnBnI,KAAKuF,SACLvF,KAAKoI,YACLpI,KAAK6D,QACL7D,KAAKqI,WPosBT,MA9PA7D,GAAauC,IACTlC,IAAK,WACL1H,MAAO,WOjcP,GAAIsI,GAAQzF,IACZjC,QAAOoB,iBAAiB,SAAS,WAC7BsG,EAAMwC,MAAQxC,EAAMP,GAAGrE,iBP2c3BgE,IAAK,SACL1H,MAAO,WOpcP6C,KAAKkF,GAAGoC,UAAR,+NAQAtH,KAAKsI,KAAOzK,SAAS+F,cAAc,mBACnC5D,KAAKuI,KAAOvI,KAAKkF,GAAGsD,kBACpBxI,KAAKuI,KAAKE,MAAMR,MAAsC,KAA1BjI,KAAK8G,OAAO7H,OAAS,GAAjD,IACAe,KAAKuI,KAAKjB,UAAYtH,KAAK8G,OAAOE,IAAI,SAAAC,GAAA,0DACzBA,EAAMC,KADmB,6BAEtBD,EAAMhG,MAFgB,qCAI/BwG,KAAK,IACZzH,KAAKiI,MAAQjI,KAAKkF,GAAGrE,WACrB,IAAI6H,GAAQ1I,KAAKuI,KAAKC,iBACtBxI,MAAKuI,KAAKI,mBAAmB,YAAa3I,KAAK4I,YAAYF,OPuc3D7D,IAAK,cACL1H,MAAO,SO/bE0L,GACT,GAAIC,GAAUjL,SAASkL,cAAc,MACrCD,GAAQE,YAAYH,EAAKI,WAAU,GACnC,IAAIC,GAAMJ,EAAQxB,SAElB,OADAwB,GAAUD,EAAO,KACVK,KPwcPrE,IAAK,WACL1H,MAAO,WOjcP6C,KAAKN,MAAQyJ,YAAYnJ,KAAKoJ,KAAKC,KAAKrJ,MAAOA,KAAK+H,aP2cpDlD,IAAK,QACL1H,MAAO,WOpcP6C,KAAKsJ,cP+cLzE,IAAK,OACL1H,MAAO,WOtcH6C,KAAKgI,QAAUhI,KAAK8G,OAAO7H,SAC3Be,KAAKgI,MAAQ,EACbhI,KAAKuI,KAAKE,MAAMjI,KAAO,KAE3BR,KAAKgI,OAAS,EACdhI,KAAKuJ,QAAQvJ,KAAKuI,MAAMvI,KAAKiI,MAAQjI,KAAKgI,OAC1ChI,KAAKwJ,kBPodL3E,IAAK,UACL1H,MAAO,SO5cHoG,EAAKhF,GACTkL,cAAclG,EAAI7D,OAClB6D,EAAI7D,MAAQyJ,YAAY,WACpB,GAAIO,GAASnG,EAAIoG,WACbC,GAAQrL,EAASmL,GAAU,CAC/BE,GAAOA,EAAO,EAAIC,KAAKC,KAAKF,GAAQC,KAAKE,MAAMH,GAC/CF,GAAkBE,EAClBrG,EAAIkF,MAAMjI,KAAOkJ,EAAS,KACtBA,IAAWnL,GACXkL,cAAclG,EAAI7D,QAExB,OPsdFmF,IAAK,MACL1H,MAAO,WO9cY,IAAf6C,KAAKgI,QACLhI,KAAKgI,MAAQhI,KAAK8G,OAAO7H,OACzBe,KAAKuI,KAAKE,MAAMjI,KAAhB,IAA2BR,KAAKgI,MAAQhI,KAAKiI,MAA7C,MAEJjI,KAAKgI,OAAS,EACdhI,KAAKuJ,QAAQvJ,KAAKuI,MAAMvI,KAAKgI,MAAQhI,KAAKiI,OAC1CjI,KAAKwJ,kBPwdL3E,IAAK,eACL1H,MAAO,WOhdP,IAAK,GADD6M,GAAMhK,KAAKsI,KAAK2B,SAAShL,OACpBpD,EAAI,EAAGA,GAAKmO,EAAKnO,IAAK,CAC3B,GAAIqO,GAAIrM,SAASsM,qBAAqB,KAAKtO,EACvCqO,IAAGA,EAAEpL,UAAUwC,OAAO,UACtBtB,KAAKgI,QAAUnM,GACXqO,GAAGA,EAAEpL,UAAUwH,IAAI,UAER,IAAftG,KAAKgI,QACLkC,EAAIrM,SAASsM,qBAAqB,KAAK,GACvCD,EAAEpL,UAAUwH,IAAI,eP8dxBzB,IAAK,YACL1H,MAAO,WOrdP6C,KAAKuI,KAAKpJ,iBAAiB,aAAca,KAAKoK,WAAWf,KAAKrJ,OAC9DA,KAAKuI,KAAKpJ,iBAAiB,YAAYa,KAAKqK,UAAUhB,KAAKrJ,OAC3DA,KAAKuI,KAAKpJ,iBAAiB,WAAYa,KAAKsK,SAASjB,KAAKrJ,UP+d1D6E,IAAK,aACL1H,MAAO,SOzdAoN,GAEP,GADAd,cAAczJ,KAAKN,OACfM,KAAKmI,YAAa,CAClB,GAAIqC,GAAQD,EAAEE,cAAc,EAC5BzK,MAAKkI,OAASsC,EAAME,QACpB1K,KAAKmI,aAAc,MPmevBtD,IAAK,YACL1H,MAAO,SO5dDoN,GAIN,GAHAA,EAAEI,iBACFJ,EAAEK,kBACFnB,cAAczJ,KAAKN,QACdM,KAAKmI,YAAa,CACnB,GAAI0C,GAAON,EAAEO,eAAe,GACxBC,EAASF,EAAKH,QACd3K,EAAOgL,EAAS/K,KAAKkI,OACrB8C,GAAUhL,KAAKgI,MAAQhI,KAAKiI,KAC5BlI,GAAO,GAAKA,GAAQC,KAAKiI,OAAU+C,EAASjL,EAAQ,EACpDC,KAAKuJ,QAAQvJ,KAAKuI,KAAKyC,EAASjL,GACzBA,EAAO,GAAK8J,KAAKoB,IAAIlL,IAASC,KAAKiI,OAAU+C,EAASnB,KAAKoB,IAAIlL,IAAWC,KAAK8G,OAAO7H,OAASe,KAAKiI,MAC3GjI,KAAKuJ,QAAQvJ,KAAKuI,KAAKyC,EAASnB,KAAKoB,IAAIlL,IACjCiL,EAASjL,EAAQ,GACN,IAAfC,KAAKgI,QACLhI,KAAKgI,MAAQhI,KAAK8G,OAAO7H,OACzBe,KAAKuI,KAAKE,MAAMjI,KAAhB,IAA2BR,KAAKgI,MAAQhI,KAAKiI,MAA7C,MAEJjI,KAAKuJ,QAAQvJ,KAAKuI,MAAOvI,KAAKgI,MAAQhI,KAAKiI,MAASlI,IAC7CiL,EAASjL,EAAOC,KAAKiI,MAAQjI,KAAK8G,OAAO7H,SAC5Ce,KAAKgI,QAAUhI,KAAK8G,OAAO7H,SAC3Be,KAAKgI,MAAQ,EACbhI,KAAKuI,KAAKE,MAAMjI,KAAhB,IAA2BR,KAAKgI,MAAQhI,KAAKiI,MAA7C,MAEJjI,KAAKuJ,QAAQvJ,KAAKuI,MAAOvI,KAAKgI,MAAQhI,KAAKiI,MAASlI,QP2e5D8E,IAAK,WACL1H,MAAO,SOneFoN,GACL,GAAI9E,GAAQzF,IACZ,KAAKyF,EAAM0C,YAAa,CACpBsB,cAAchE,EAAM/F,MACpB,IAAIwL,GAAUX,EAAEO,eAAe,GAC3BK,EAAaD,EAAQR,QACrB3K,EAAOoL,EAAa1F,EAAMyC,MAC1BnI,GAAQ0F,EAAMwC,MAAQ,GACtBxC,EAAM2F,MACN3F,EAAM6D,WACN7D,EAAM0C,aAAc,GACbpI,GAAS0F,EAAMwC,MAAQ,GAC9BxC,EAAM2D,OACN3D,EAAM6D,WACN7D,EAAM0C,aAAc,IAEpB1C,EAAM8D,QAAQ9D,EAAM8C,MAAM9C,EAAMuC,MAAQvC,EAAMwC,OAC9CxC,EAAM6D,WACN7D,EAAM0C,aAAc,QP4ezBpB,MAKL,SAAUnL,EAAQD,EAASH,GAEjC,YQvtBAqC,UAASsB,iBAAiB,aAAc,SAAAkM,GACpC,GAAI9M,GAAS8M,EAAM9M,MACnB,IAA4B,QAAxBA,EAAO6C,QAAQkK,KAAnB,IACGnN,QAAQpC,KAAKwC,EAAOgN,cAActB,SAAU,SAAAuB,GAC3CA,EAAI1M,UAAUwC,OAAO,YAEzB/C,EAAOO,UAAUwH,IAAI,SACrB,IAAImF,GAAU5N,SAAS+F,cAAcrF,EAAO6C,QAAQsK,KAChDD,QACGtN,QAAQpC,KAAK0P,EAAQF,cAActB,SAAU,SAAA0B,GAC5CA,EAAMlD,MAAMmD,QAAU,SAE1BH,EAAQhD,MAAMmD,QAAU,aRguB1B,SAAUhQ,EAAQD,EAASH,GAEjC,YAcA,SAAS4I,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAXhHjI,OAAOC,eAAeZ,EAAS,cAC3BwB,OAAO,IAEXxB,EAAQsI,YAAUhC,EAElB,IAAIuC,GAAe,WAAc,QAASC,GAAiBlG,EAAQmG,GAAS,IAAK,GAAI7I,GAAI,EAAGA,EAAI6I,EAAMzF,OAAQpD,IAAK,CAAE,GAAI8I,GAAaD,EAAM7I,EAAI8I,GAAWlI,WAAakI,EAAWlI,aAAc,EAAOkI,EAAWnI,cAAe,EAAU,SAAWmI,KAAYA,EAAWC,UAAW,GAAMtI,OAAOC,eAAegC,EAAQoG,EAAWE,IAAKF,IAAiB,MAAO,UAAUL,EAAaQ,EAAYC,GAAiJ,MAA9HD,IAAYL,EAAiBH,EAAYvH,UAAW+H,GAAiBC,GAAaN,EAAiBH,EAAaS,GAAqBT,MStvBhiB1C,EAAApG,EAAA,GACAyJ,EAAAzJ,EAAA,ET6vBcG,GS5vBDsI,QT4vBmB,WS3vB5B,QAAAA,GAAYiB,GAAId,EAAApE,KAAAiE,GACZjE,KAAKkF,GAAKA,ET00Bd,MApEAV,GAAaP,IACTY,IAAK,QACL1H,MAAO,WSlwBH,GAAAgI,GAAAnF,IACJ,IAAI,SAAWjC,QACXqH,qBACKC,KAAK,SAAAzC,GAAA,MAAOA,GAAI0C,SAChBD,KAAK,SAAAC,GAAA,MAASH,GAAKwC,KAAOrC,EAAKkB,KAAKqF,UACpCxG,KAAK,iBAAMF,GAAKI,eAClB,CACH,GAAIC,UACAC,EAAQzF,IAERwF,GADAzH,OAAO2H,eACD,GAAIA,gBAEJ,GAAIC,eAAc,qBAE5BH,EAAII,KAAK,MAAThE,EAAAvE,aAA2B,GAC3BmI,EAAIK,OACJL,EAAIM,mBAAqB,WACE,IAAnBN,EAAIO,aACe,MAAfP,EAAIQ,QACJP,EAAMH,KAAOW,KAAKC,MAAMV,EAAIW,cAC5BV,EAAMF,UAENa,QAAQC,IAAI,KAAOb,EAAIQ,cToxBvCnB,IAAK,SACL1H,MAAO,WS1wBF,GAAA2O,GAAA9L,IACLnC,UAAS+F,cAAc,YAAY0D,UAAYtH,KAAK2H,KAAKX,IAAI,SAAA+E,GAAA,mKAEyBA,EAAKtK,GAF9B,6DAGvBsK,EAAK3E,OAAO4E,QAAQ,UAAW,YAHR,8GAIKD,EAAKE,YAAc,KAAOpE,QAAQ,GAAK,uIAGrBkE,EAAKtK,GAP5B,0GASnBsK,EAAKG,SATc,gDAU7BJ,EAAKK,SAASJ,EAAKlF,UAVU,yDAavDY,KAAK,KACX,EAAAxC,EAAAxH,UAASuC,KAAKkF,GAAGpH,iBAAiB,iBT4wBlC+G,IAAK,WACL1H,MAAO,SSpwBFiP,GACL,MAAOA,GAAMpF,IAAI,SAACqF,EAAKxQ,GAAN,oEACOA,EAAI,GADX,yCAESwQ,EAAKC,SAFd,YAEkCD,EAAKE,WAFvC,kBAGX9E,KAAK,QTuwBRxD,MAKL,SAAUrI,EAAQD,EAASH,GAEjC,YAYA,SAAS4I,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAThHjI,OAAOC,eAAeZ,EAAS,cAC3BwB,OAAO,IAEXxB,EAAQoI,WAAS9B,EAEjB,IAAIuC,GAAe,WAAc,QAASC,GAAiBlG,EAAQmG,GAAS,IAAK,GAAI7I,GAAI,EAAGA,EAAI6I,EAAMzF,OAAQpD,IAAK,CAAE,GAAI8I,GAAaD,EAAM7I,EAAI8I,GAAWlI,WAAakI,EAAWlI,aAAc,EAAOkI,EAAWnI,cAAe,EAAU,SAAWmI,KAAYA,EAAWC,UAAW,GAAMtI,OAAOC,eAAegC,EAAQoG,EAAWE,IAAKF,IAAiB,MAAO,UAAUL,EAAaQ,EAAYC,GAAiJ,MAA9HD,IAAYL,EAAiBH,EAAYvH,UAAW+H,GAAiBC,GAAaN,EAAiBH,EAAaS,GAAqBT,MU71BhiBkI,EAAAhR,EAAA,EVm2BaG,GUj2BAoI,OVi2BiB,WUh2B1B,QAAAA,KAAcK,EAAApE,KAAA+D,GACV/D,KAAKyM,MAAQ5O,SAAS+F,cAAc,WACpC5D,KAAKoM,MAAQvO,SAAS+F,cAAc,cACpC5D,KAAK0M,eACL1M,KAAK+B,QAAU,GACf/B,KAAKgC,KAAO,EACZhC,KAAK2M,QAAS,EACd3M,KAAK4M,UAAW,EAChB5M,KAAK6M,WACL7M,KAAK8M,OAASjP,SAAS+F,cAAc,gBACrC5D,KAAK+M,OAASlP,SAAS+F,cAAc,kBACrC5D,KAAKgN,QAAUnP,SAAS+F,cAAc,aACtC5D,KAAKiN,WAAapP,SAAS+F,cAAc,gBACzC5D,KAAKyM,MAAMtN,iBAAiB,QAAQa,KAAKkN,QAAQ7D,KAAKrJ,OAEtDjC,OAAOoB,iBAAiB,SAASa,KAAKmN,SAAS9D,KAAKrJ,OACpDjC,OAAOoB,iBAAiB,QAAQa,KAAKoN,QAAQ/D,KAAKrJ,OAElDA,KAAKqN,YAAc,iBACnBrN,KAAK6M,QAAUS,aAAaC,QAAQvN,KAAKqN,aAAeC,aAAaC,QAAQvN,KAAKqN,aAAatK,MAAM,QV8lCzG,MAhPAyB,GAAaT,IACTc,IAAK,UACL1H,MAAO,SUv2BHkO,GAEJ,GAAItJ,GAAUsJ,EAAM9M,OAAOpB,MAAMqQ,MACjC,KAAIzL,EAIA,MADA/B,MAAK8M,OAAOhO,UAAUwH,IAAI,QACnBtG,KAAKyN,OAHZzN,MAAK8M,OAAOhO,UAAUwC,OAAO,QAMX,KAAlB+J,EAAMqC,UACV1N,KAAKiN,WAAWnO,UAAUwH,IAAI,QAC9BtG,KAAK2N,WAAW5L,GAChB/B,KAAKgE,OAAOjC,OVi3BZ8C,IAAK,UACL1H,MAAO,SU12BHoN,GAgCJ,GA7BIA,EAAEhM,SAAWyB,KAAKyM,QAClBzM,KAAK+M,OAAOjO,UAAUwC,OAAO,QAC7BtB,KAAKgN,QAAQlO,UAAUwH,IAAI,QAC3BtG,KAAKiN,WAAWnO,UAAUwC,OAAO,QACjCtB,KAAK4N,gBACL5N,KAAKyN,SAGLlD,EAAEhM,SAAWyB,KAAK+M,SAClB/M,KAAK+M,OAAOjO,UAAUwH,IAAI,QAC1BtG,KAAK8M,OAAOhO,UAAUwH,IAAI,QAC1BtG,KAAKgN,QAAQlO,UAAUwC,OAAO,QAC9BtB,KAAKiN,WAAWnO,UAAUwH,IAAI,QAC9BtG,KAAKyM,MAAMtP,MAAQ,GACnB6C,KAAKyN,SAGLlD,EAAEhM,SAAWyB,KAAK8M,SAClB9M,KAAKyM,MAAMtP,MAAQ,GACnB6C,KAAK8M,OAAOhO,UAAUwH,IAAI,QAC1BtG,KAAKyN,SAGLlD,EAAEhM,OAAO+D,QAAQ,oBACjBtC,KAAK6M,WACLS,aAAaO,QAAQ7N,KAAKqN,YAAYrN,KAAK6M,SAC3C7M,KAAKiN,WAAW3F,UAAY,IAG5BiD,EAAEhM,OAAO+D,QAAQ,eAAgB,CACjC,GAAM0F,GAAQhI,KAAK6M,QAAQrK,QAAQ+H,EAAEhM,OAAOuP,uBAAuBxG,UACnEtH,MAAK6M,QAAQkB,OAAO/F,EAAM,GAC1BsF,aAAaO,QAAQ7N,KAAKqN,YAAYrN,KAAK6M,SAC3C7M,KAAK4N,iBAELrD,EAAEhM,OAAO+D,QAAQ,iBAAmBiI,EAAEhM,OAAO+D,QAAQ,kBACrD8D,QAAQC,IAAIkE,EAAEhM,OAAO+I,WACrBtH,KAAKyM,MAAMtP,MAAQoN,EAAEhM,OAAO+I,UAC5BtH,KAAK+B,QAAUwI,EAAEhM,OAAO+I,UACxBtH,KAAK8M,OAAOhO,UAAUwC,OAAO,QAC7BtB,KAAK+M,OAAOjO,UAAUwC,OAAO,QAC7BtB,KAAKgN,QAAQlO,UAAUwH,IAAI,QAC3BtG,KAAK2N,WAAW3N,KAAK+B,SACrB/B,KAAKgE,OAAOhE,KAAK+B,aVq3BrB8C,IAAK,aACL1H,MAAO,SU72BA4E,GACPqE,QAAQC,IAAI,UAAYtE,IAET,IADH/B,KAAK6M,QAAQrK,QAAQT,KAE7B/B,KAAK6M,QAAQmB,QAAQjM,GACrBuL,aAAaO,QAAQ7N,KAAKqN,YAAYrN,KAAK6M,aVu3B/ChI,IAAK,gBACL1H,MAAO,WU/2BP,GAAI6C,KAAK6M,QAAQ5N,OAAS,EAAG,CACzB,GAAIgP,GAAcjO,KAAK6M,QAAQ7F,IAAI,SAAA+E,GAAA,gNAIaA,EAJb,0IAQhCtE,KAAK,GACRwG,0EAKAjO,KAAKiN,WAAW3F,UAAY2G,MACG,KAAxBjO,KAAK6M,QAAQ5N,SACpBe,KAAKiN,WAAW3F,UAAY,GAC5BtH,KAAK6M,eVk3BThI,IAAK,QACL1H,MAAO,WU12BP6C,KAAKgC,KAAO,EACZhC,KAAK+B,QAAU,GACf/B,KAAK2M,QAAS,EACd3M,KAAK0M,eACL1M,KAAKoM,MAAM9E,UAAY,GACvBzJ,SAAS+F,cAAc,iBAAiB6E,MAAMmD,QAAU,QACxD/N,SAAS+F,cAAc,iBAAiB6E,MAAMmD,QAAU,QACxD/N,SAAS+F,cAAc,iBAAiB6E,MAAMmD,QAAU,OACxD/N,SAAS+F,cAAc,mBAAmB9E,UAAUwC,OAAO,WVs3B3DuD,IAAK,WACL1H,MAAO,SU92BFoN,GACL,IAAIvK,KAAK2M,OAKL,MAAO5O,QAAOmB,oBAAoB,SAAUc,KAAKmN,SAAS9D,KAAKrJ,MAJ3DnC,UAAS+C,gBAAgBG,aAAemN,YAAcrQ,SAASsQ,KAAKC,aAAe,KACnFpO,KAAKgE,OAAOhE,KAAK+B,QAAQ/B,KAAKgC,KAAO,MV63B7C6C,IAAK,SACL1H,MAAO,SUj3BJ4E,EAASC,GAAM,GAAAyD,GAAAzF,SAEFiC,KAAZF,IAAuBA,EAAU,IACrB,KAAZA,IAEA/B,KAAK+B,UAAYA,GAAW/B,KAAK0M,YAAY1K,GAAQhC,KAAKgC,QAC1DhC,KAAK+B,UAAYA,GAAS/B,KAAKyN,SAC/BzN,KAAK4M,UAAa5M,KAAK2M,SAC3B3M,KAAK+B,QAAUA,EACf/B,KAAKqO,UACLjJ,OAAM,EAAAoH,EAAA1K,WAAU9B,KAAK+B,QAAQC,GAAQhC,KAAKgC,OACrCqD,KAAK,SAAAzC,GAAA,MAAOA,GAAI0C,SAChBD,KAAK,SAAAC,GAIF,MAHAG,GAAKzD,KAAOsD,EAAKkB,KAAK6F,KAAKiC,QAC3B7I,EAAKiH,YAAYjH,EAAKzD,MAAQsD,EAAKkB,KAAK6F,KAAK1E,KAC7ClC,EAAKkH,OAA2B,eAAjBrH,EAAKiJ,QACbjJ,EAAKkB,KAAK6F,KAAK1E,OAEzBtC,KAAK,SAAA+G,GAAA,MAAS3G,GAAK+I,OAAOpC,KAC1B/G,KAAK,iBAAMI,GAAKgJ,eAChBC,MAAM,iBAAMtI,SAAQC,IAAI,iBVg4B7BxB,IAAK,SACL1H,MAAO,SUz3BJiP,GACH,GAAIuC,GAAOvC,EAAMpF,IAAI,SAAAqF,GACjB,GAAIuC,GAASvC,EAAKwC,OAAO7H,IAAI,SAAA9J,GAAA,MAAKA,GAAEf,OAAMsL,KAAK,GAC/C,oEAC0BmH,EAD1B,WAC2CvC,EAAK1K,OADhD,aACmE0K,EAAKC,SADxE,aAC6FD,EAAKyC,SADlG,aACuHzC,EAAKtE,SAD5H,2FAG2BsE,EAAKC,SAHhC,kDAI6BsC,EAJ7B,6BAMDnH,KAAK,GACRzH,MAAKoM,MAAMzD,mBAAmB,YAAagG,MV+3B3C9J,IAAK,UACL1H,MAAO,WUx3BP6C,KAAK4M,UAAW,EAChB/O,SAAS+F,cAAc,mBAAmB9E,UAAUwH,IAAI,WVk4BxDzB,IAAK,aACL1H,MAAO,WU33BP6C,KAAK4M,UAAW,EACX5M,KAAK2M,OAKN9O,SAAS+F,cAAc,mBAAmB9E,UAAUwC,OAAO,SAJ3DzD,SAAS+F,cAAc,iBAAiB6E,MAAMmD,QAAU,OACxD/N,SAAS+F,cAAc,iBAAiB6E,MAAMmD,QAAU,OACxD/N,SAAS+F,cAAc,iBAAiB6E,MAAMmD,QAAU,aVo4BzD7H,MAKL,SAAUnI,EAAQD,EAASH,GAEjC,YAYA,SAAS4I,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAThHjI,OAAOC,eAAeZ,EAAS,cAC3BwB,OAAO,IAEXxB,EAAQuI,gBAAcjC,EAEtB,IAAIuC,GAAe,WAAc,QAASC,GAAiBlG,EAAQmG,GAAS,IAAK,GAAI7I,GAAI,EAAGA,EAAI6I,EAAMzF,OAAQpD,IAAK,CAAE,GAAI8I,GAAaD,EAAM7I,EAAI8I,GAAWlI,WAAakI,EAAWlI,aAAc,EAAOkI,EAAWnI,cAAe,EAAU,SAAWmI,KAAYA,EAAWC,UAAW,GAAMtI,OAAOC,eAAegC,EAAQoG,EAAWE,IAAKF,IAAiB,MAAO,UAAUL,EAAaQ,EAAYC,GAAiJ,MAA9HD,IAAYL,EAAiBH,EAAYvH,UAAW+H,GAAiBC,GAAaN,EAAiBH,EAAaS,GAAqBT,MWnoChiBkI,EAAAhR,EAAA,GAgJMuT,GX8/BYpT,EWnoCLuI,YXmoC2B,WWloCpC,QAAAA,GAAYgB,GAAId,EAAApE,KAAAkE,GACZlE,KAAKkF,GAAKA,EACVlF,KAAKkF,GAAG/F,iBAAiB,QAASa,KAAKgP,YAAY3F,KAAKrJ,OACxDA,KAAKiP,MAAQjP,KAAKkP,cAClBlP,KAAKmP,OAAS,GAAIC,GAAapP,KAAKkF,GAAGtB,cAAc,kBAAmB5D,KAAKiP,OAC7EjP,KAAKqP,SAAW,GAAIN,GAAS/O,KAAKkF,GAAGtB,cAAc,cACnD5D,KAAK4M,UAAW,EX6xCpB,MA/IApI,GAAaN,IACTW,IAAK,cACL1H,MAAO,WWzoCG,GAAAgI,GAAAnF,KACNiP,EAAQpR,SAASkL,cAAc,QAUnC,OATAkG,GAAMxN,GAAN,UAAqBoI,KAAKE,MAAsB,IAAhBF,KAAKyF,UAArC,MAAyD,GAAIxP,MAG7DmP,EAAM9P,iBAAiB,QAAS,WAC5BgG,EAAK8J,MAAM/L,OACXiC,EAAKgK,OAAOI,UACZpK,EAAKkK,SAASE,YAElB1R,SAASsQ,KAAKnF,YAAYiG,GACnBA,KXopCPpK,IAAK,cACL1H,MAAO,SW9oCCkO,GACR,GAAI9M,GAAS8M,EAAM9M,MAEnB,SAAQ,GACR,IAAKA,GAAO+D,QAAQ,cAChBtC,KAAKwP,OAAOnE,EACZ,MACJ,KAAK9M,GAAO+D,QAAQ,eAChBtC,KAAKyP,QAAQpE,EACb,MACJ,KAAK9M,GAAO+D,QAAQ,cAChBtC,KAAKmD,WXypCT0B,IAAK,SACL1H,MAAO,SWjpCJkO,GAECrL,KAAK4M,WACT5M,KAAKiP,MAAM/L,OACXlD,KAAKmP,OAAOtL,QACZ7D,KAAKqP,SAASxL,QACdwH,EAAM9M,OAAOO,UAAUwC,OAAO,aAC9B+J,EAAM9M,OAAOO,UAAUwH,IAAI,kBX4pC3BzB,IAAK,OACL1H,MAAO,WWppCQ,GAAA2O,GAAA9L,KAAd0C,EAAczC,UAAAhB,OAAA,OAAAgD,KAAAhC,UAAA,GAAAA,UAAA,KACf,KAAKyC,EAAS,MAAO,EACrB1C,MAAKkF,GAAGtB,cAAc,cAAc8L,UAAYhN,EAAQ4J,SACxDtM,KAAKkF,GAAGtB,cAAc,gBAAgB8L,UAAYhN,EAAQkM,OAC1D5O,KAAKqP,SAAS5B,MAAM/K,EAAQiN,SAG5B,IAAIC,IAAW,EAAApD,EAAA3K,eAAca,EAAQoM,SACrC9O,MAAKkF,GAAGtB,cAAc,gBAAgBzC,IAAMyO,EAC5C5P,KAAKkF,GAAGtB,cAAc,sBAAsB6E,MAAMoH,gBAAlD,OAA2ED,EAA3E,IAEIlN,EAAQf,SACJ3B,KAAK2B,SAAWe,EAAQf,SACxB3B,KAAKkF,GAAGtB,cAAc,gBAAgBkM,UAAY,yBAGtD9P,KAAK2B,OAASe,EAAQf,OACtB3B,KAAKiP,MAAM9N,KAAM,EAAAqL,EAAAhL,SAAQxB,KAAK2B,QAC9B3B,KAAK4M,UAAW,EAChBxH,OAAM,EAAAoH,EAAA9K,WAAU1B,KAAK2B,SAChB0D,KAAK,SAAAzC,GAAA,MAAOA,GAAI0C,SAChBD,KAAK,SAAAC,GAAA,MAAQA,GAAKyK,QAClB1K,KAAK,SAAA2K,GAAA,MAAQlE,GAAKqD,OAAO1B,MAAMuC,KAC/BtB,MAAM,SAACuB,GAAD,MAASC,OAAMD,KACrB5K,KAAK,WACFyG,EAAKc,UAAW,KAG5B5M,KAAKmE,UXoqCLU,IAAK,UACL1H,MAAO,SW9pCHkO,GACJrL,KAAKiP,MAAMkB,QACXnQ,KAAKmP,OAAOgB,QACZnQ,KAAKqP,SAASc,QACd9E,EAAM9M,OAAOO,UAAUwC,OAAO,cAC9B+J,EAAM9M,OAAOO,UAAUwH,IAAI,gBXsqC3BzB,IAAK,OACL1H,MAAO,WWhqCP6C,KAAKkF,GAAGpG,UAAUwH,IAAI,QACtBzI,SAASsQ,KAAKrP,UAAUwH,IAAI,eXyqC5BzB,IAAK,OACL1H,MAAO,WWnqCP6C,KAAKkF,GAAGpG,UAAUwC,OAAO,QACzBzD,SAASsQ,KAAKrP,UAAUwC,OAAO,gBXwqC5B4C,KAUI,WWxqCX,QAAA6K,GAAY7J,EAAIyK,EAAU9L,GAAOO,EAAApE,KAAA+O,GAC7B/O,KAAKoQ,IAAMlL,EACXlF,KAAKqQ,QAAU,EACfrQ,KAAK2P,SAAWA,GAAY,EAC5B3P,KAAKqP,SAAW,EAChBrP,KAAKuF,SACLvF,KAAKsQ,UAAYtQ,KAAKoQ,IAAIxM,cAAc,0BACxC5D,KAAKuQ,SAAWvQ,KAAKoQ,IAAIxM,cAAc,qBACvC5D,KAAKwQ,UAAYxQ,KAAKoQ,IAAIxM,cAAc,sBACxC5D,KAAKuQ,SAASb,UAAY1P,KAAKyQ,WAAWzQ,KAAKqQ,SAC/CrQ,KAAKwQ,UAAUd,UAAY1P,KAAKyQ,WAAWzQ,KAAK2P,UAC5C9L,GAAO7D,KAAK6D,QX4wCpB,MAzFAW,GAAauK,IACTlK,IAAK,UACL1H,MAAO,WW9qCP6C,KAAKyN,QACLzN,KAAK6D,WXurCLgB,IAAK,QACL1H,MAAO,WWjrCP6C,KAAKmQ,QACLnQ,KAAK0Q,WAAavH,YAAYnJ,KAAK2Q,OAAOtH,KAAKrJ,MAAO,OX0rCtD6E,IAAK,SACL1H,MAAO,WWprCP6C,KAAKqQ,SAAW,IAEZrQ,KAAKqQ,SAAWrQ,KAAK2P,UAAU3P,KAAKyN,QACxCzN,KAAKqP,SAAWrP,KAAKqQ,QAAUrQ,KAAK2P,SACpC3P,KAAKsQ,UAAU7H,MAAMmI,UAArB,cAA8D,IAAhB5Q,KAAKqP,SAAiB,KAApE,KACArP,KAAKuQ,SAASb,UAAY1P,KAAKyQ,WAAWzQ,KAAKqQ,YX6rC/CxL,IAAK,QACL1H,MAAO,WWvrCPsM,cAAczJ,KAAK0Q,eXisCnB7L,IAAK,QACL1H,MAAO,SW3rCLwS,GACF3P,KAAKmQ,QACLnQ,KAAKqQ,QAAU,EACfrQ,KAAKqP,SAAW,EAChBrP,KAAKsQ,UAAU7H,MAAMmI,UAAY,mBACjC5Q,KAAKuQ,SAASb,UAAY1P,KAAKyQ,WAAWzQ,KAAKqQ,SAC3CV,IACA3P,KAAK2P,UAAYA,EACjB3P,KAAKwQ,UAAUd,UAAY1P,KAAKyQ,WAAWzQ,KAAK2P,cXosCpD9K,IAAK,SACL1H,MAAO,WW7rCP6C,KAAKoQ,IAAI9I,UAAT,kQXwsCAzC,IAAK,aACL1H,MAAO,SW3rCA0T,GACP,GAAIC,GAAOjH,KAAKE,MAAM8G,EAAU,IAC5BE,EAAOlH,KAAKE,MAAM8G,EAAU,GAGhC,OAFIC,GAAO,KAAIA,EAAO,IAAMA,GACxBC,EAAO,KAAIA,EAAO,IAAMA,GAClBD,EAAV,IAAkBC,MX+rCfhC,MWtrCLK,EXgsCa,WW/rCf,QAAAA,GAAYlK,EAAI+J,GAAO7K,EAAApE,KAAAoP,GACnBpP,KAAKoQ,IAAMlL,EACXlF,KAAKoQ,IAAI9I,UAAY,0CACrBtH,KAAKgR,OAAShR,KAAKoQ,IAAIxM,cAAc,wBACrC5D,KAAKiR,OAAShC,EACdjP,KAAKgQ,KAAO,GACZhQ,KAAKgI,MAAQ,EACbhI,KAAKmP,UACLnP,KAAKyN,MAAMzN,KAAKgQ,MXyzCpB,MApHAxL,GAAa4K,IACTvK,IAAK,QACL1H,MAAO,WWpsCP6C,KAAKmQ,QACLnQ,KAAK0Q,WAAavH,YAAYnJ,KAAK2Q,OAAOtH,KAAKrJ,MAAO,QX6sCtD6E,IAAK,UACL1H,MAAO,WWvsCP6C,KAAKyN,QACLzN,KAAK6D,WX2sCLgB,IAAK,QACL1H,MAAO,WWzsCPsM,cAAczJ,KAAK0Q,eXktCnB7L,IAAK,SACL1H,MAAO,WW5sCP,GAAIsI,GAAQzF,IAaZ,IAZAA,KAAKiR,OAAOC,aAAe,SAAU3G,GACjC,IAAK,GAAI1O,GAAI,EAAGC,EAAI2J,EAAM0J,OAAOlQ,OAAQpD,EAAIC,EAAGD,IAExCmE,KAAKmR,YAA0B1L,EAAM2L,WAAW3L,EAAM0J,OAAOtT,IAAM,KAEnE4J,EAAMuL,OAAO/G,SAASxE,EAAMuC,OAAOlJ,UAAUwC,OAAO,UACpDmE,EAAMuL,OAAO/G,SAASpO,GAAGiD,UAAUwH,IAAI,UACvCb,EAAMuC,MAAQnM,IAKtBmE,KAAKgI,MAAQ,EAAG,CAChB,GAAIqJ,KAAMrR,KAAKgI,MAAQ,GAAKhI,KAAKsR,WACjCtR,MAAKgR,OAAOvI,MAAMmI,UAAlB,cAA4CS,EAA5C,UXutCJxM,IAAK,QACL1H,MAAO,SWhtCL6S,GACFhQ,KAAKmQ,QACLnQ,KAAKgI,MAAQ,EACbhI,KAAKgR,OAAOvI,MAAMmI,UAAlB,eACA,IAAIW,GAAUvR,KAAKgR,OAAOpN,cAAc,UACpC2N,IACAA,EAAQzS,UAAUwC,OAAO,UAEzB0O,IACAhQ,KAAKgQ,KAAOhQ,KAAKwR,WAAWxB,IAAS,GACrChQ,KAAKmP,OAASnP,KAAKgQ,KAAKvN,MAAM,qCAE1BzC,KAAKmP,OAAOlQ,QAAQe,KAAKuF,UAG7BvF,KAAKmP,OAAOlQ,QACZe,KAAKgR,OAAO/G,SAASjK,KAAKgI,OAAOlJ,UAAUwH,IAAI,aXstCnDzB,IAAK,aACL1H,MAAO,SWntCAsU,GACP,OAAQA,EAAKzF,QAAQ,8BAA+B,SAACvJ,EAAOiP,EAAIC,GAAZ,MAA2B,KAAND,EAAWE,YAAYD,QX6tChG9M,IAAK,SACL1H,MAAO,WWvtCP,GAAIwR,GAAO3O,KAAKmP,OAAOnI,IAAI,SAAAyK,GAAA,qDACSA,EAAKlP,MAAM,IADpB,qBAExBkF,KAAK,GACRzH,MAAKgR,OAAO1J,UAAYqH,KXquCxB9J,IAAK,aACL1H,MAAO,SW3tCA6S,GACP,GAAI6B,GAAMhU,SAASkL,cAAc,MAEjC,OADA8I,GAAIvK,UAAY0I,EACT6B,EAAInC,cX+tCRN,IW3tCXA,GAAarS,UAAUuU,YAAc,IXkuC/B,SAAU1V,EAAQD,EAASH,GAEjC,YAYA,SAAS4I,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAThHjI,OAAOC,eAAeZ,EAAS,cAC3BwB,OAAO,IAEXxB,EAAQmI,WAAS7B,EAEjB,IAAIuC,GAAe,WAAc,QAASC,GAAiBlG,EAAQmG,GAAS,IAAK,GAAI7I,GAAI,EAAGA,EAAI6I,EAAMzF,OAAQpD,IAAK,CAAE,GAAI8I,GAAaD,EAAM7I,EAAI8I,GAAWlI,WAAakI,EAAWlI,aAAc,EAAOkI,EAAWnI,cAAe,EAAU,SAAWmI,KAAYA,EAAWC,UAAW,GAAMtI,OAAOC,eAAegC,EAAQoG,EAAWE,IAAKF,IAAiB,MAAO,UAAUL,EAAaQ,EAAYC,GAAiJ,MAA9HD,IAAYL,EAAiBH,EAAYvH,UAAW+H,GAAiBC,GAAaN,EAAiBH,EAAaS,GAAqBT,MYrkDhiB1C,EAAApG,EAAA,EZ2kDaG,GYzkDAmI,OZykDiB,WYxkD1B,QAAAA,GAAYoB,GAAId,EAAApE,KAAA8D,GACZ9D,KAAKkF,GAAKA,EZgoDd,MAlDAV,GAAaV,IACTe,IAAK,QACL1H,MAAO,WY9kDH,GAAAsI,GAAAzF,IACJoF,sBACKC,KAAK,SAAAzC,GAAA,MAAOA,GAAI0C,SAChBD,KAAK,SAAAC,GAAA,MAAQG,GAAKF,OAAOD,EAAKkB,WZ2lDnC3B,IAAK,SACL1H,MAAO,SYrlDJqJ,GACH,GAAIsL,GAAOtL,EAAKuL,OACZ/E,EAAUhN,KAAKgS,QAAQF,EAAK,GAAG9K,IAAI,SAAA+K,GAAA,2DACGA,EAAOE,EADV,kBAIvCjS,MAAKkF,GAAGoC,UAAY,YAAYd,EAAK0L,YAAjB,yBAAqD1L,EAAK2L,YAA1D,OAA8EnF,KZgmDlGnI,IAAK,UACL1H,MAAO,SYxlDHiV,EAAMC,GAGV,IAAK,GAFDvP,MACAkH,EAAMH,KAAKyI,IAAID,EAAOD,EAAMnT,QACvBpD,EAAI,EAAEA,EAAImO,EAAInO,IAAK,CACxB,GAAI0W,GAAOH,EACP9C,EAASzF,KAAKE,MAAMF,KAAKyF,SAAWiD,EAAKtT,OAC7C6D,GAAIjH,GAAK0W,EAAKjD,GACd8C,EAAMrE,OAAOuB,EAAO,GAExB,MAAOxM,OZ4lDJgB","file":"dist/app.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar RECOMMEND_URL = exports.RECOMMEND_URL = 'https://shenzekun-qmusic-api.now.sh/';\nvar TOPLIST_URL = exports.TOPLIST_URL = 'https://shenzekun-qmusic-api.now.sh/top';\nvar SEARCH_URL = exports.SEARCH_URL = 'https://shenzekun-qmusic-api.now.sh/search';\nvar LYRICS_URL = exports.LYRICS_URL = 'https://shenzekun-qmusic-api.now.sh/lyrics';\nvar HOTKEYS_URL = exports.HOTKEYS_URL = 'https://shenzekun-qmusic-api.now.sh/hotkey';\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.lazyload = lazyload;\nfunction lazyload() {\n    var imgs = Array.from(document.querySelectorAll('.lazyload'));\n    //判断浏览器是否有IntersectionObserver\n    if ('IntersectionObserver' in window) {\n        var observer = new IntersectionObserver(function (changes) {\n            changes.forEach(function (change) {\n                if (change.intersectionRatio > 0) {\n                    loadImage(change.target, function () {\n                        observer.unobserve(change.target);\n                    });\n                }\n            });\n        });\n        imgs.forEach(function (img) {\n            observer.observe(img);\n        });\n    } else {\n        var onscroll = throttle(function () {\n            imgs = imgs.filter(function (img) {\n                return img.classList.contains('lazyload');\n            });\n            imgs.forEach(function (img) {\n                return isVisible(img) && loadImage(img);\n            });\n            //如果图片到没有了，移除监听事件提高性能\n            if (imgs.length === 0) {\n                window.removeEventListener('scroll', onscroll);\n            }\n            imgs.forEach(function (img) {\n                return isVisible(img) && loadImage(img);\n            });\n        }, 300);\n        window.addEventListener('scroll', onscroll);\n        window.dispatchEvent(new Event('scroll'));\n    }\n}\n\n/**\n * @description 节流\n * @param {any} func 函数\n * @param {any} wait 时间\n * @returns \n */\nfunction throttle(func, wait) {\n    var context = void 0,\n        args = void 0,\n        timer = void 0;\n    var prev = 0;\n    return function fn() {\n        var now = +new Date();\n        var diff = now - prev;\n        context = this;\n        args = arguments;\n        if (!prev || diff >= wait) {\n            func.apply(context, args);\n            prev = now;\n        } else if (diff < wait) {\n            clearTimeout(timer);\n            timer = setTimeout(fn, wait - diff);\n        }\n    };\n}\n/**\n * @description 判断元素是否可见\n * @param {any} img \n * @returns \n */\nfunction isVisible(img) {\n    var _img$getBoundingClien = img.getBoundingClientRect(),\n        top = _img$getBoundingClien.top,\n        left = _img$getBoundingClien.left,\n        right = _img$getBoundingClien.right,\n        bottom = _img$getBoundingClien.bottom;\n\n    var windowWidth = document.documentElement.clientWidth;\n    var windowHeight = document.documentElement.clientHeight;\n    return (top > 0 && top < windowHeight || bottom > 0 && bottom < windowHeight) && (left > 0 && left < windowWidth || right > 0 && right < windowWidth);\n}\n\n/**\n * @description 加载图片\n * @param {any} img \n * @param {any} callback \n */\nfunction loadImage(img, callback) {\n    var image = new Image();\n    image.src = img.dataset.src;\n    image.onload = function () {\n        img.src = image.src;\n        img.classList.remove('lazyload');\n        if (Object.prototype.toString.call(callback) === '[object Function]') {\n            callback();\n        }\n    };\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.songUrl = songUrl;\nexports.lyricsUrl = lyricsUrl;\nexports.albumCoverUrl = albumCoverUrl;\nexports.searchUrl = searchUrl;\n\nvar _content = __webpack_require__(0);\n\n//歌 url\nfunction songUrl(id) {\n    return 'http://ws.stream.qqmusic.qq.com/' + id + '.m4a?fromtag=46';\n}\n\n//歌词 url\nfunction lyricsUrl(songid) {\n    return _content.LYRICS_URL + '?id=' + songid;\n}\n\n//相册\nfunction albumCoverUrl(id) {\n    return 'https://y.gtimg.cn/music/photo_new/T002R150x150M000' + id + '.jpg';\n}\n\n//处理搜索的 url \n// @param {any} keyword 用户输入的数据\n// @param {number} [page=1]  页数默认为1\nfunction searchUrl(keyword) {\n    var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n    return _content.SEARCH_URL + '?keyword=' + keyword + '&page=' + page;\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _recommend = __webpack_require__(4);\n\nvar _tab = __webpack_require__(6);\n\nvar _tab2 = _interopRequireDefault(_tab);\n\nvar _toplist = __webpack_require__(7);\n\nvar _search = __webpack_require__(8);\n\nvar _player = __webpack_require__(9);\n\nvar _hotkey = __webpack_require__(10);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar recommend = new _recommend.Recommend(document.querySelector('.rec-view')).start();\n\nvar hotkey = new _hotkey.HotKey(document.querySelector('.result-tags')).start();\n\nvar search = new _search.Search().search();\n\nvar toplist = new _toplist.TopList(document.querySelector('.rec-view')).start();\n\nvar player = new _player.MusicPlayer(document.querySelector('#player'));\n\ndocument.querySelector('#show_player').addEventListener('click', function () {\n    player.show();\n});\n\nonHashChange();\n\naddEventListener('hashchange', onHashChange);\n\nfunction onHashChange() {\n    var hash = location.hash;\n    if (/#player\\?.+/.test(hash)) {\n        var matches = hash.slice(hash.indexOf('?') + 1).match(/(\\w+)=([^&]+)/g);\n        var options = matches && matches.reduce(function (res, cur) {\n            var arr = cur.split('=');\n            res[arr[0]] = decodeURIComponent(arr[1]);\n            return res;\n        }, {});\n        // console.log(options);\n        player.play(options);\n    } else {\n        player.hide();\n    }\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Recommend = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _content = __webpack_require__(0);\n\nvar _slider = __webpack_require__(5);\n\nvar _lazyload = __webpack_require__(1);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Recommend = exports.Recommend = function () {\n    function Recommend(el) {\n        _classCallCheck(this, Recommend);\n\n        this.el = el;\n    }\n    /**\n     * @description 开始\n     * @memberof Recommend\n     */\n\n\n    _createClass(Recommend, [{\n        key: 'start',\n        value: function start() {\n            var _this2 = this;\n\n            if ('fetch' in window) {\n                fetch(_content.RECOMMEND_URL).then(function (res) {\n                    return res.json();\n                }).then(function (json) {\n                    return _this2.json = json;\n                }).then(function () {\n                    return _this2.render();\n                });\n            } else {\n                //如果不兼容 fetch\n                var xhr = void 0;\n                var _this = this;\n                if (window.XMLHttpRequest) {\n                    xhr = new XMLHttpRequest();\n                } else {\n                    //兼容 ie6\n                    xhr = new ActiveXObject('Microsoft.XMLHTTP');\n                }\n                //连接\n                xhr.open('GET', _content.RECOMMEND_URL, true);\n                //发送请求\n                xhr.send();\n\n                xhr.onreadystatechange = function () {\n                    //读取完成\n                    if (xhr.readyState === 4) {\n                        if (xhr.status === 200) {\n                            _this.json = JSON.parse(xhr.responseText);\n                            _this.render();\n                        } else {\n                            console.log('失败' + xhr.status);\n                        }\n                    }\n                };\n            }\n        }\n        /**\n         * @description 渲染数据\n         * @memberof Recommend\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            document.querySelector('.loading').classList.add('hide');\n            this.renderSlider(this.json.data.slider);\n            this.renderRadios(this.json.data.radioList);\n            this.renderPlayList(this.json.data.songList);\n            (0, _lazyload.lazyload)();\n        }\n        /**\n         * @description 渲染轮播图\n         * @param {any} slides \n         * @memberof Recommend\n         */\n\n    }, {\n        key: 'renderSlider',\n        value: function renderSlider(slides) {\n            this.slider = new _slider.Slider({\n                el: this.el.querySelector('#slider'),\n                slides: slides.map(function (slide) {\n                    return {\n                        link: slide.linkUrl,\n                        image: slide.picUrl\n                    };\n                })\n            });\n        }\n\n        /**\n         * @description 渲染电台部分\n         * @param {any} radios \n         * @memberof Recommend\n         */\n\n    }, {\n        key: 'renderRadios',\n        value: function renderRadios(radios) {\n            document.querySelector('.radios .list').innerHTML = radios.map(function (radio) {\n                return '<div class=\"list-item\">\\n                <div class=\"list-media\">\\n                    <img data-src=\"' + radio.picUrl + '\" class=\"lazyload\" src=\"./images/default_pic.jpg\">\\n                    <span class=\"icon icon_play\"></span>\\n                </div>\\n                <div class=\"list-info\">' + radio.Ftitle + '</div>\\n            </div>';\n            }).join('');\n        }\n\n        /**\n         * @description 渲染推荐页的热门歌单\n         * @param {any} playlists \n         * @memberof Recommend\n         */\n\n    }, {\n        key: 'renderPlayList',\n        value: function renderPlayList(playlists) {\n            document.querySelector('.playlists .list').innerHTML = playlists.map(function (list) {\n                return '<div class=\"list-item\">\\n            <a href=\\'https://y.qq.com/w/taoge.html?ADTAG=myqq&from=myqq&channel=10007100&id=' + list.id + '\\'>\\n            <div class=\"list-media\">\\n                <img class=\"lazyload\" data-src=\"' + list.picUrl + '\" src=\"./images/default_pic.jpg\">\\n                <span class=\"listen_count\"><span class=\"icon icon_listen\"></span>' + ((list.accessnum / 10000).toFixed(1) + '万') + '</span>\\n                <span class=\"icon icon_play\"></span>\\n            </div>\\n            <div class=\"list-info\">\\n                <div class=\"list_tit\">' + list.songListDesc + '</div>\\n                <div class=\"list-text\"></div>\\n            </div>\\n            </a>\\n        </div>';\n            }).join('');\n        }\n    }]);\n\n    return Recommend;\n}();\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Slider = exports.Slider = function () {\n    function Slider() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, Slider);\n\n        this.el = options.el;\n        this.slides = options.slides;\n        this.interval = options.interval || 2000;\n        this.index = 0;\n        this.width = 0; //每张图片的大小的宽度\n        this.touchX = 0; //触控开始的手指最初落点\n        this.ready_moved = true; //判断每次滑动开始的标记变量\n        this.render();\n        this.bindEvent();\n        this.start();\n        this.onresize();\n    }\n    /**\n     * @description 当窗口发生变化的时候，获取屏幕宽度，使图片发生改变\n     * @memberof Slider\n     */\n\n\n    _createClass(Slider, [{\n        key: 'onresize',\n        value: function onresize() {\n            var _this = this;\n            window.addEventListener('resize', function () {\n                _this.width = _this.el.clientWidth;\n            });\n        }\n        /**\n         * @description 渲染\n         * @memberof Slider\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            this.el.innerHTML = '<div class=\"qq-slider-wrap\"></div>\\n        <p class=\"ui-slider-dots\">\\n        <b class=\"active\"></b>\\n        <b class=\"\"></b>\\n        <b class=\"\"></b>\\n        <b class=\"\"></b>\\n        <b class=\"\"></b>\\n        </p>';\n            this.dots = document.querySelector('.ui-slider-dots');\n            this.wrap = this.el.firstElementChild;\n            this.wrap.style.width = (this.slides.length + 1) * 100 + '%';\n            this.wrap.innerHTML = this.slides.map(function (slide) {\n                return '<div class=\"qq-slider-item\">\\n          <a href=\"' + slide.link + '\">\\n            <img src=\"' + slide.image + '\">\\n          </a>\\n      </div>';\n            }).join('');\n            this.width = this.el.clientWidth;\n            var first = this.wrap.firstElementChild;\n            this.wrap.insertAdjacentHTML('beforeend', this.domToString(first)); //无缝滚动拷贝第一个到到容器的最后一个\n        }\n\n        /**\n         * @description dom 元素转为字符串\n         * @param {any} node \n         * @returns string\n         * @memberof Slider\n         */\n\n    }, {\n        key: 'domToString',\n        value: function domToString(node) {\n            var tmpNode = document.createElement('div');\n            tmpNode.appendChild(node.cloneNode(true));\n            var str = tmpNode.innerHTML;\n            tmpNode = node = null; // 解除引用，以便于垃圾回收  \n            return str;\n        }\n\n        /**\n         * @description 自动播放\n         * @memberof Slider\n         */\n\n    }, {\n        key: 'autoPlay',\n        value: function autoPlay() {\n            this.timer = setInterval(this.next.bind(this), this.interval);\n        }\n\n        /**\n         * @description 开始播放\n         * @memberof Slider\n         */\n\n    }, {\n        key: 'start',\n        value: function start() {\n            this.autoPlay();\n        }\n\n        /**\n         * @description 下一张\n         * @returns \n         * @memberof Slider\n         */\n\n    }, {\n        key: 'next',\n        value: function next() {\n            //先判断在加\n            if (this.index === this.slides.length) {\n                //5\n                this.index = 0;\n                this.wrap.style.left = '0';\n            }\n            this.index += 1;\n            this.animate(this.wrap, -this.width * this.index);\n            this.setActiveDot();\n        }\n\n        /**\n         * @description 动画\n         * @param {any} obj \n         * @param {any} target \n         * @memberof Slider\n         */\n\n    }, {\n        key: 'animate',\n        value: function animate(obj, target) {\n            clearInterval(obj.timer);\n            obj.timer = setInterval(function () {\n                var leader = obj.offsetLeft;\n                var step = (target - leader) / 2;\n                step = step > 0 ? Math.ceil(step) : Math.floor(step);\n                leader = leader + step;\n                obj.style.left = leader + 'px';\n                if (leader === target) {\n                    clearInterval(obj.timer);\n                }\n            }, 30);\n        }\n\n        /**\n         * @description 上一张\n         * @returns \n         * @memberof Slider\n         */\n\n    }, {\n        key: 'pre',\n        value: function pre() {\n            if (this.index === 0) {\n                this.index = this.slides.length;\n                this.wrap.style.left = '-' + this.index * this.width + 'px';\n            }\n            this.index -= 1;\n            this.animate(this.wrap, -this.index * this.width);\n            this.setActiveDot();\n        }\n\n        /**\n         * @description 设置激活的小点\n         * @memberof Slider\n         */\n\n    }, {\n        key: 'setActiveDot',\n        value: function setActiveDot() {\n            var len = this.dots.children.length;\n            for (var i = 0; i <= len; i++) {\n                var b = document.getElementsByTagName('b')[i];\n                if (b) b.classList.remove('active'); //判断 b 是否存在\n                if (this.index === i) {\n                    if (b) b.classList.add('active');\n                }\n                if (this.index === 5) {\n                    //如果 index 等于5 那么将圆点变为第一个\n                    b = document.getElementsByTagName('b')[0];\n                    b.classList.add('active');\n                }\n            }\n        }\n\n        /**\n         * @description 绑定事件\n         * @memberof Slider\n         */\n\n    }, {\n        key: 'bindEvent',\n        value: function bindEvent() {\n            this.wrap.addEventListener('touchstart', this.touchstart.bind(this));\n            this.wrap.addEventListener('touchmove', this.touchmove.bind(this));\n            this.wrap.addEventListener('touchend', this.touchend.bind(this));\n        }\n        /**\n         * @description touchstart事件\n         * @param {any} e \n         * @memberof Slider\n         */\n\n    }, {\n        key: 'touchstart',\n        value: function touchstart(e) {\n            clearInterval(this.timer);\n            if (this.ready_moved) {\n                var touch = e.targetTouches[0];\n                this.touchX = touch.clientX;\n                this.ready_moved = false;\n            }\n        }\n        /**\n         * @description touchmove 事件\n         * @param {any} e \n         * @memberof Slider\n         */\n\n    }, {\n        key: 'touchmove',\n        value: function touchmove(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            clearInterval(this.timer);\n            if (!this.ready_moved) {\n                var move = e.changedTouches[0];\n                var moveAt = move.clientX;\n                var diff = moveAt - this.touchX;\n                var offset = -this.index * this.width; //一张图片的偏移量\n                if (diff > 0 && diff <= this.width && offset + diff < 0) {\n                    //向右移，并且 diff 要小于一张图片的宽度\n                    this.animate(this.wrap, offset + diff);\n                } else if (diff < 0 && Math.abs(diff) <= this.width && offset - Math.abs(diff) > -this.slides.length * this.width) {\n                    //向左移,并且 diff 要小于一张图片的宽度\n                    this.animate(this.wrap, offset - Math.abs(diff));\n                } else if (offset + diff > 0) {\n                    //当临界值在第一张向左移的时候\n                    if (this.index === 0) {\n                        this.index = this.slides.length;\n                        this.wrap.style.left = '-' + this.index * this.width + 'px';\n                    }\n                    this.animate(this.wrap, -(this.index * this.width) + diff);\n                } else if (offset - diff < this.width * this.slides.length) {\n                    //当最后一张向右移的时候\n                    if (this.index === this.slides.length) {\n                        this.index = 0;\n                        this.wrap.style.left = '-' + this.index * this.width + 'px';\n                    }\n                    this.animate(this.wrap, -(this.index * this.width) - diff);\n                }\n            }\n        }\n        /**\n         * @description touchend事件\n         * @param {any} e \n         * @memberof Slider\n         */\n\n    }, {\n        key: 'touchend',\n        value: function touchend(e) {\n            var _this = this;\n            if (!_this.ready_moved) {\n                clearInterval(_this.timer);\n                var release = e.changedTouches[0];\n                var releasedAt = release.clientX;\n                var diff = releasedAt - _this.touchX;\n                if (diff > _this.width / 2) {\n                    //当右移滑动距离大于图片宽度的一半时\n                    _this.pre();\n                    _this.autoPlay();\n                    _this.ready_moved = true;\n                } else if (diff < -(_this.width / 2)) {\n                    //当左移滑动距离小于宽度的一半时（-400px < -360px）\n                    _this.next();\n                    _this.autoPlay();\n                    _this.ready_moved = true;\n                } else {\n                    //回到原来的图片\n                    _this.animate(_this.wrap, -_this.index * _this.width);\n                    _this.autoPlay();\n                    _this.ready_moved = true;\n                }\n            }\n        }\n    }]);\n\n    return Slider;\n}();\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\ndocument.addEventListener('touchstart', function (event) {\n    var target = event.target;\n    if (target.dataset.role !== 'tab') return;\n    [].forEach.call(target.parentElement.children, function (tab) {\n        tab.classList.remove('active');\n    });\n    target.classList.add('active');\n    var content = document.querySelector(target.dataset.view);\n    if (content) {\n        [].forEach.call(content.parentElement.children, function (child) {\n            child.style.display = 'none';\n        });\n        content.style.display = 'block';\n    }\n});\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.TopList = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _content = __webpack_require__(0);\n\nvar _lazyload = __webpack_require__(1);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar TopList = exports.TopList = function () {\n    function TopList(el) {\n        _classCallCheck(this, TopList);\n\n        this.el = el;\n    }\n    /**\n     * @description 开始\n     * @memberof TopList\n     */\n\n\n    _createClass(TopList, [{\n        key: 'start',\n        value: function start() {\n            var _this2 = this;\n\n            if ('fetch' in window) {\n                fetch(_content.TOPLIST_URL).then(function (res) {\n                    return res.json();\n                }).then(function (json) {\n                    return _this2.list = json.data.topList;\n                }).then(function () {\n                    return _this2.render();\n                });\n            } else {\n                var xhr = void 0;\n                var _this = this;\n                if (window.XMLHttpRequest) {\n                    xhr = new XMLHttpRequest();\n                } else {\n                    xhr = new ActiveXObject('Microsoft.XMLHTTP');\n                }\n                xhr.open('GET', _content.TOPLIST_URL, true);\n                xhr.send();\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState === 4) {\n                        if (xhr.status === 200) {\n                            _this.json = JSON.parse(xhr.responseText);\n                            _this.render();\n                        } else {\n                            console.log('失败' + xhr.status);\n                        }\n                    }\n                };\n            }\n        }\n\n        /**\n         * @description 渲染\n         * @memberof TopList\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this3 = this;\n\n            document.querySelector('.toplist').innerHTML = this.list.map(function (item) {\n                return '<li class=\"top-item\">\\n        <div class=\"top-item-media\">\\n          <a href=\\'https://y.qq.com/w/toplist.html?ADTAG=myqq&from=myqq&channel=10007100&id=' + item.id + '&type=top\\'>\\n            <img class=\"lazyload\" data-src=\"' + item.picUrl.replace('http://', 'https://') + '\" src=\"./images/default_pic.jpg\">\\n            <span class=\"listen_count\"><i class=\"icon icon-listen\"></i>' + ((item.listenCount / 10000).toFixed(1) + '万') + '</span>\\n          </a>\\n        </div>\\n        <a href=\\'https://y.qq.com/w/toplist.html?ADTAG=myqq&from=myqq&channel=10007100&id=' + item.id + '&type=top\\'>\\n            <div class=\"top-item-info\">\\n            <h3 class=\"top-item-title ellipsis\">' + item.topTitle + '</h3>\\n            <ul class=\"top-item-list\">' + _this3.songlist(item.songList) + '</ul>\\n            </div>\\n        </a>\\n      </li>';\n            }).join('');\n            (0, _lazyload.lazyload)(this.el.querySelectorAll('.lazyload'));\n        }\n\n        /**\n         * @description 获取歌\n         * @param {any} songs 返回字符串\n         * @returns \n         * @memberof TopList\n         */\n\n    }, {\n        key: 'songlist',\n        value: function songlist(songs) {\n            return songs.map(function (song, i) {\n                return '<li class=\"top-item-song\">\\n        <i class=\"song-index\">' + (i + 1) + '</i>\\n        <span class=\"song-name\">' + song.songname + '</span>- ' + song.singername + '\\n      </li>';\n            }).join('');\n        }\n    }]);\n\n    return TopList;\n}();\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Search = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _helper = __webpack_require__(2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Search = exports.Search = function () {\n    function Search() {\n        _classCallCheck(this, Search);\n\n        this.input = document.querySelector('#search');\n        this.songs = document.querySelector('.song-list');\n        this.songsObject = {}; //存放歌曲\n        this.keyword = ''; //输入搜索的值\n        this.page = 1; //默认页数为1\n        this.isLoad = true; //能否继续加载数据\n        this.fetching = false; //正在 fetch\n        this.history = [];\n        this.delete = document.querySelector('.icon-delete');\n        this.cancel = document.querySelector('.search-cancel');\n        this.hotKeys = document.querySelector('#hot-keys');\n        this.recordKeys = document.querySelector('.record-keys');\n        this.input.addEventListener('keyup', this.onEnter.bind(this));\n\n        window.addEventListener('scroll', this.onScroll.bind(this));\n        window.addEventListener('click', this.onClick.bind(this));\n\n        this.HISTORY_KEY = 'search_history';\n        this.history = localStorage.getItem(this.HISTORY_KEY) ? localStorage.getItem(this.HISTORY_KEY).split(',') : [];\n    }\n\n    /**\n     * @description enter 事件\n     * @param {any} event \n     * @returns \n     * @memberof Search\n     */\n\n\n    _createClass(Search, [{\n        key: 'onEnter',\n        value: function onEnter(event) {\n            //获取输入的值,并且去除两边的空格\n            var keyword = event.target.value.trim();\n            if (keyword) {\n                this.delete.classList.remove('hide');\n            } else {\n                this.delete.classList.add('hide');\n                return this.reset();\n            }\n            //如果不是 enter 直接返回\n            if (event.keyCode !== 13) return;\n            this.recordKeys.classList.add('hide');\n            this.addHistory(keyword);\n            this.search(keyword);\n        }\n\n        /**\n         * @description 点击事件\n         * @param {any} e \n         * @memberof Search\n         */\n\n    }, {\n        key: 'onClick',\n        value: function onClick(e) {\n            // console.log(e.target);\n            //如果点击到了输入按钮\n            if (e.target === this.input) {\n                this.cancel.classList.remove('hide');\n                this.hotKeys.classList.add('hide');\n                this.recordKeys.classList.remove('hide');\n                this.renderHistory();\n                this.reset();\n            }\n            //如果点击到了取消按钮\n            if (e.target === this.cancel) {\n                this.cancel.classList.add('hide');\n                this.delete.classList.add('hide');\n                this.hotKeys.classList.remove('hide');\n                this.recordKeys.classList.add('hide');\n                this.input.value = '';\n                this.reset();\n            }\n            //如果点击到了删除按钮\n            if (e.target === this.delete) {\n                this.input.value = '';\n                this.delete.classList.add('hide');\n                this.reset();\n            }\n            //如果匹配到了清除搜索记录\n            if (e.target.matches('.record-delete')) {\n                this.history = [];\n                localStorage.setItem(this.HISTORY_KEY, this.history);\n                this.recordKeys.innerHTML = '';\n            }\n            //如果匹配到了单条记录的删除按钮\n            if (e.target.matches('.icon-close')) {\n                var index = this.history.indexOf(e.target.previousElementSibling.innerHTML);\n                this.history.splice(index, 1);\n                localStorage.setItem(this.HISTORY_KEY, this.history);\n                this.renderHistory();\n            }\n            if (e.target.matches('.tag-keyword') || e.target.matches('.record-con')) {\n                console.log(e.target.innerHTML);\n                this.input.value = e.target.innerHTML;\n                this.keyword = e.target.innerHTML;\n                this.delete.classList.remove('hide');\n                this.cancel.classList.remove('hide');\n                this.hotKeys.classList.add('hide');\n                this.addHistory(this.keyword);\n                this.search(this.keyword);\n            }\n        }\n\n        /**\n         * @description 添加历史\n         * @param {any} keyword \n         * @memberof Search\n         */\n\n    }, {\n        key: 'addHistory',\n        value: function addHistory(keyword) {\n            console.log('keyword' + keyword);\n            var index = this.history.indexOf(keyword);\n            if (index === -1) {\n                this.history.unshift(keyword);\n                localStorage.setItem(this.HISTORY_KEY, this.history);\n            }\n        }\n\n        /**\n         * @description 渲染历史\n         * @memberof Search\n         */\n\n    }, {\n        key: 'renderHistory',\n        value: function renderHistory() {\n            if (this.history.length > 0) {\n                var historyHTML = this.history.map(function (item) {\n                    return '\\n                <li>\\n                    <a href=\"#\" class=\"record-main\">\\n                        <span class=\"icon icon-clock\"></span>\\n                        <span class=\"record-con ellipsis\">' + item + '</span>\\n                        <span class=\"icon icon-close\"></span>\\n                    </a>\\n                </li>\\n            ';\n                }).join('');\n                historyHTML += '\\n                <p class=\"record-delete\">\\u6E05\\u9664\\u641C\\u7D22\\u8BB0\\u5F55</p>\\n            ';\n                // console.log(historyHTML)\n                // console.log(this.recordKeys)\n                this.recordKeys.innerHTML = historyHTML;\n            } else if (this.history.length === 0) {\n                this.recordKeys.innerHTML = '';\n                this.history = [];\n            }\n        }\n\n        /**\n         * @description 重置\n         * @memberof Search\n         */\n\n    }, {\n        key: 'reset',\n        value: function reset() {\n            this.page = 1;\n            this.keyword = '';\n            this.isLoad = true;\n            this.songsObject = {};\n            this.songs.innerHTML = '';\n            document.querySelector('.loading-icon').style.display = 'block';\n            document.querySelector('.loading-text').style.display = 'block';\n            document.querySelector('.loading-done').style.display = 'none';\n            document.querySelector('.search-loading').classList.remove('show');\n        }\n\n        /**\n         * @description 滚动事件\n         * @param {any} e \n         * @returns \n         * @memberof Search\n         */\n\n    }, {\n        key: 'onScroll',\n        value: function onScroll(e) {\n            if (this.isLoad) {\n                if (document.documentElement.clientHeight + pageYOffset > document.body.scrollHeight - 100) {\n                    this.search(this.keyword, this.page + 1);\n                }\n            } else {\n                return window.removeEventListener('scroll', this.onScroll.bind(this));\n            }\n        }\n\n        /**\n         * @description 搜索\n         * @param {any} keyword 用户输入的数据\n         * @param {any} page 页数\n         * @memberof Search\n         */\n\n    }, {\n        key: 'search',\n        value: function search(keyword, page) {\n            var _this = this;\n\n            //刚进来时 keyword为 undefined ，因为没有 enter\n            if (keyword === undefined) keyword = '';\n            if (keyword === '') return;\n            //如果已经搜索过，并且没有改动 keyword 那么直接返回\n            if (this.keyword === keyword && this.songsObject[page || this.page]) return;\n            if (this.keyword !== keyword) this.reset();\n            if (this.fetching || !this.isLoad) return;\n            this.keyword = keyword;\n            this.loading();\n            fetch((0, _helper.searchUrl)(this.keyword, page || this.page)).then(function (res) {\n                return res.json();\n            }).then(function (json) {\n                _this.page = json.data.song.curpage;\n                _this.songsObject[_this.page] = json.data.song.list;\n                _this.isLoad = json.message !== 'no results';\n                return json.data.song.list;\n            }).then(function (songs) {\n                return _this.append(songs);\n            }).then(function () {\n                return _this.accomplish();\n            }).catch(function () {\n                return console.log('error');\n            });\n        }\n\n        /**\n         * @description 添加歌曲的html到页面\n         * @param {any} songs \n         * @memberof Search\n         */\n\n    }, {\n        key: 'append',\n        value: function append(songs) {\n            var html = songs.map(function (song) {\n                var artist = song.singer.map(function (s) {\n                    return s.name;\n                }).join('');\n                return '<a class=\"song-item\"\\n               href=\"#player?artist=' + artist + '&songid=' + song.songid + '&songname=' + song.songname + '&albummid=' + song.albummid + '&duration=' + song.interval + '\">\\n              <i class=\"icon icon-music\"></i>\\n              <div class=\"song-name\">' + song.songname + '</div>\\n              <div class=\"song-artist\">' + artist + '</div>\\n            </a>';\n            }).join('');\n            this.songs.insertAdjacentHTML('beforeend', html);\n        }\n\n        /**\n        * @description 函数加载\n        * @memberof Search\n        */\n\n    }, {\n        key: 'loading',\n        value: function loading() {\n            this.fetching = true;\n            document.querySelector('.search-loading').classList.add('show');\n        }\n\n        /**\n         * @description 函数加载完成\n         * @memberof Search\n         */\n\n    }, {\n        key: 'accomplish',\n        value: function accomplish() {\n            this.fetching = false;\n            if (!this.isLoad) {\n                //如果不能加载了，就显示已加载全部\n                document.querySelector('.loading-icon').style.display = 'none';\n                document.querySelector('.loading-text').style.display = 'none';\n                document.querySelector('.loading-done').style.display = 'block';\n            } else {\n                document.querySelector('.search-loading').classList.remove('show');\n            }\n        }\n    }]);\n\n    return Search;\n}();\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.MusicPlayer = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _helper = __webpack_require__(2);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @description 音乐播放器界面\n * @export\n * @class MusicPlayer\n */\nvar MusicPlayer = exports.MusicPlayer = function () {\n    function MusicPlayer(el) {\n        _classCallCheck(this, MusicPlayer);\n\n        this.el = el;\n        this.el.addEventListener('click', this.handleEvent.bind(this));\n        this.audio = this.createAudio();\n        this.lyrics = new LyricsPlayer(this.el.querySelector('.player-lyrics'), this.audio);\n        this.progress = new Progress(this.el.querySelector('.progress'));\n        this.fetching = false;\n    }\n    /**\n     * @description 创建 audio\n     * @returns HTMLAudioElement\n     * @memberof MusicPlayer\n     */\n\n\n    _createClass(MusicPlayer, [{\n        key: 'createAudio',\n        value: function createAudio() {\n            var _this2 = this;\n\n            var audio = document.createElement('audio');\n            audio.id = 'player-' + Math.floor(Math.random() * 100) + '-' + +new Date();\n            // console.log(audio.id)\n            //播放结束的时候\n            audio.addEventListener('ended', function () {\n                _this2.audio.play();\n                _this2.lyrics.restart();\n                _this2.progress.restart();\n            });\n            document.body.appendChild(audio);\n            return audio;\n        }\n        /**\n         * @description 处理事件\n         * @param {any} event \n         * @memberof MusicPlayer\n         */\n\n    }, {\n        key: 'handleEvent',\n        value: function handleEvent(event) {\n            var target = event.target;\n            // console.log(target);\n            switch (true) {\n                case target.matches('.icon-play'):\n                    this.onPlay(event);\n                    break;\n                case target.matches('.icon-pause'):\n                    this.onPause(event);\n                    break;\n                case target.matches('.icon-list'):\n                    this.hide();\n                    break;\n            }\n        }\n        /**\n         * @description 显示 play 按钮\n         * @param {any} event \n         * @memberof MusicPlayer\n         */\n\n    }, {\n        key: 'onPlay',\n        value: function onPlay(event) {\n            //如果正在 fetching 返回\n            if (this.fetching) return;\n            this.audio.play();\n            this.lyrics.start();\n            this.progress.start();\n            event.target.classList.remove('icon-play');\n            event.target.classList.add('icon-pause');\n        }\n\n        /**\n         * @description 播放\n         * @param {any} [options={}] \n         * @returns \n         * @memberof MusicPlayer\n         */\n\n    }, {\n        key: 'play',\n        value: function play() {\n            var _this3 = this;\n\n            var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n            if (!options) return 0;\n            this.el.querySelector('.song-name').innerText = options.songname;\n            this.el.querySelector('.song-artist').innerText = options.artist;\n            this.progress.reset(options.duration);\n\n            //设置背景图和头像\n            var coverUrl = (0, _helper.albumCoverUrl)(options.albummid);\n            this.el.querySelector('.album-cover').src = coverUrl;\n            this.el.querySelector('.player-background').style.backgroundImage = 'url(' + coverUrl + ')';\n\n            if (options.songid) {\n                if (this.songid !== options.songid) {\n                    this.el.querySelector('.icon-action').className = 'icon-action icon-play';\n                }\n\n                this.songid = options.songid;\n                this.audio.src = (0, _helper.songUrl)(this.songid);\n                this.fetching = true;\n                fetch((0, _helper.lyricsUrl)(this.songid)).then(function (res) {\n                    return res.json();\n                }).then(function (json) {\n                    return json.lyric;\n                }).then(function (text) {\n                    return _this3.lyrics.reset(text);\n                }).catch(function (err) {\n                    return alert(err);\n                }).then(function () {\n                    _this3.fetching = false;\n                });\n            }\n            this.show();\n        }\n        /**\n         * @description 显示暂停按钮\n         * @param {any} event \n         * @memberof MusicPlayer\n         */\n\n    }, {\n        key: 'onPause',\n        value: function onPause(event) {\n            this.audio.pause();\n            this.lyrics.pause();\n            this.progress.pause();\n            event.target.classList.remove('icon-pause');\n            event.target.classList.add('icon-play');\n        }\n        /**\n         * @description 显示播放器\n         * @memberof MusicPlayer\n         */\n\n    }, {\n        key: 'show',\n        value: function show() {\n            this.el.classList.add('show');\n            document.body.classList.add('noscroll');\n        }\n        /**\n         * @description 隐藏播放器\n         * @memberof MusicPlayer\n         */\n\n    }, {\n        key: 'hide',\n        value: function hide() {\n            this.el.classList.remove('show');\n            document.body.classList.remove('noscroll');\n        }\n    }]);\n\n    return MusicPlayer;\n}();\n\n/**\n * @description 进度条\n * @export\n * @class Progress\n */\n\n\nvar Progress = function () {\n    function Progress(el, duration, start) {\n        _classCallCheck(this, Progress);\n\n        this.$el = el;\n        this.elapsed = 0; //当前时间\n        this.duration = duration || 0; //持续时间\n        this.progress = 0; //进度条\n        this.render();\n        this.$progress = this.$el.querySelector('.progress-bar-progress');\n        this.$elapsed = this.$el.querySelector('.progress-elapsed');\n        this.$duration = this.$el.querySelector('.progress-duration');\n        this.$elapsed.innerText = this.formatTime(this.elapsed);\n        this.$duration.innerText = this.formatTime(this.duration);\n        if (start) this.start();\n    }\n    /**\n     * @description 重新开始\n     * @memberof Progress\n     */\n\n\n    _createClass(Progress, [{\n        key: 'restart',\n        value: function restart() {\n            this.reset();\n            this.start();\n        }\n        /**\n         * @description 开始\n         * @memberof Progress\n         */\n\n    }, {\n        key: 'start',\n        value: function start() {\n            this.pause();\n            this.intervalId = setInterval(this.update.bind(this), 50);\n        }\n        /**\n         * @description 更新时间\n         * @memberof Progress\n         */\n\n    }, {\n        key: 'update',\n        value: function update() {\n            this.elapsed += 0.05;\n            //如果当前时间大于总的持续时间的话就时间重置\n            if (this.elapsed >= this.duration) this.reset();\n            this.progress = this.elapsed / this.duration;\n            this.$progress.style.transform = 'translate(' + (this.progress * 100 - 100) + '%)';\n            this.$elapsed.innerText = this.formatTime(this.elapsed);\n        }\n        /**\n         * @description 清除计时器\n         * @memberof Progress\n         */\n\n    }, {\n        key: 'pause',\n        value: function pause() {\n            clearInterval(this.intervalId);\n        }\n        /**\n         * @description 重置\n         * @param {any} duration \n         * @memberof Progress\n         */\n\n    }, {\n        key: 'reset',\n        value: function reset(duration) {\n            this.pause();\n            this.elapsed = 0;\n            this.progress = 0;\n            this.$progress.style.transform = 'translate(-100%)';\n            this.$elapsed.innerText = this.formatTime(this.elapsed);\n            if (duration) {\n                this.duration = +duration;\n                this.$duration.innerText = this.formatTime(this.duration);\n            }\n        }\n        /**\n         * @description 渲染\n         * @memberof Progress\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            this.$el.innerHTML = '\\n          <div class=\"progress-time progress-elapsed\"></div>\\n            <div class=\"progress-bar\">\\n              <div class=\"progress-bar-progress\"></div>\\n            </div>\\n          <div class=\"progress-time progress-duration\"></div>\\n        ';\n        }\n        /**\n         * @description 格式化时间毫秒\n         * @param {any} seconds \n         * @returns 返回 05:10这种形式的时间\n         * @memberof Progress\n         */\n\n    }, {\n        key: 'formatTime',\n        value: function formatTime(seconds) {\n            var mins = Math.floor(seconds / 60);\n            var secs = Math.floor(seconds % 60);\n            if (mins < 10) mins = '0' + mins;\n            if (secs < 10) secs = '0' + secs;\n            return mins + ':' + secs;\n        }\n    }]);\n\n    return Progress;\n}();\n\n/**\n * @description 歌词\n * @export\n * @class LyricsPlayer\n */\n\n\nvar LyricsPlayer = function () {\n    function LyricsPlayer(el, audio) {\n        _classCallCheck(this, LyricsPlayer);\n\n        this.$el = el;\n        this.$el.innerHTML = '<div class=\"player-lyrics-lines\"></div>';\n        this.$lines = this.$el.querySelector('.player-lyrics-lines');\n        this.$audio = audio;\n        this.text = ''; //歌词文本\n        this.index = 0; //页数\n        this.lyrics = []; //歌词数组\n        this.reset(this.text);\n    }\n\n    _createClass(LyricsPlayer, [{\n        key: 'start',\n        value: function start() {\n            this.pause();\n            this.intervalId = setInterval(this.update.bind(this), 1000);\n        }\n        /**\n         * @description 重新开始\n         * @memberof LyricsPlayer\n         */\n\n    }, {\n        key: 'restart',\n        value: function restart() {\n            this.reset();\n            this.start();\n        }\n    }, {\n        key: 'pause',\n        value: function pause() {\n            clearInterval(this.intervalId);\n        }\n        /**\n         * @description 更新歌词\n         * @memberof LyricsPlayer\n         */\n\n    }, {\n        key: 'update',\n        value: function update() {\n            var _this = this;\n            this.$audio.ontimeupdate = function (e) {\n                for (var i = 0, l = _this.lyrics.length; i < l; i++) {\n                    // console.log(this.currentTime,_this.getSeconds(_this.lyrics[i]));\n                    if (this.currentTime /*当前播放的时间*/ > _this.getSeconds(_this.lyrics[i]) - 0.50) {\n                        //显示到页面\n                        _this.$lines.children[_this.index].classList.remove('active');\n                        _this.$lines.children[i].classList.add('active');\n                        _this.index = i;\n                    }\n                }\n            };\n            //如果歌词页数大于2的话，歌词向上翻\n            if (this.index > 2) {\n                var y = -(this.index - 2) * this.LINE_HEIGHT;\n                this.$lines.style.transform = 'translateY(' + y + 'px)';\n            }\n        }\n        /**\n         * @description 重置\n         * @param {any} text \n         * @memberof LyricsPlayer\n         */\n\n    }, {\n        key: 'reset',\n        value: function reset(text) {\n            this.pause();\n            this.index = 0;\n            this.$lines.style.transform = 'translateY(0)';\n            var $active = this.$lines.querySelector('.active');\n            if ($active) {\n                $active.classList.remove('active');\n            }\n            if (text) {\n                this.text = this.formatText(text) || '';\n                this.lyrics = this.text.match(/^\\[\\d{2}:\\d{2}.\\d{2}\\](.+)$/gm) || [];\n                //如果 lyrics 数组有长度\n                if (this.lyrics.length) this.render();\n            }\n\n            if (this.lyrics.length) {\n                this.$lines.children[this.index].classList.add('active');\n            }\n        }\n        //获取秒数\n\n    }, {\n        key: 'getSeconds',\n        value: function getSeconds(line) {\n            return +line.replace(/^\\[(\\d{2}):(\\d{2}\\.\\d{2}).*/, function (match, p1, p2) {\n                return +p1 * 60 + parseFloat(+p2);\n            });\n        }\n        /**\n         * @description 渲染\n         * @memberof LyricsPlayer\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            var html = this.lyrics.map(function (line) {\n                return '\\n          <div class=\"player-lyrics-line\">' + line.slice(10) + '</div>\\n        ';\n            }).join('');\n            this.$lines.innerHTML = html;\n        }\n        /**\n         * @description 格式化文本 类似⬇️\n         * [xx:xx.xx]xxxxx\n         * [xx:xx.xx]xxxxx\n         * [xx:xx.xx]xxxxx\n         * @param {any} text \n         * @returns \n         * @memberof LyricsPlayer\n         */\n\n    }, {\n        key: 'formatText',\n        value: function formatText(text) {\n            var div = document.createElement('div');\n            div.innerHTML = text;\n            return div.innerText;\n        }\n    }]);\n\n    return LyricsPlayer;\n}();\n\nLyricsPlayer.prototype.LINE_HEIGHT = 42;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.HotKey = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _content = __webpack_require__(0);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar HotKey = exports.HotKey = function () {\n    function HotKey(el) {\n        _classCallCheck(this, HotKey);\n\n        this.el = el;\n    }\n\n    _createClass(HotKey, [{\n        key: 'start',\n        value: function start() {\n            var _this = this;\n\n            fetch(_content.HOTKEYS_URL).then(function (res) {\n                return res.json();\n            }).then(function (json) {\n                return _this.render(json.data);\n            });\n        }\n        /**\n         * @description 渲染数据\n         * @param {any} data \n         * @memberof HotKey\n         */\n\n    }, {\n        key: 'render',\n        value: function render(data) {\n            var keys = data.hotkey;\n            var hotKeys = this.shuffle(keys, 6).map(function (hotkey) {\n                return '\\n            <a href=\"#\" class=\"tag tag-keyword\">' + hotkey.k + '</a>\\n        ';\n            });\n            // console.log(hotkeys);\n            this.el.innerHTML = '<a href=\"' + data.special_url + '\" class=\"tag tag-hot\">' + data.special_key + '</a>' + hotKeys;\n        }\n        /**\n         * @description 洗牌\n         * @param {any} array \n         * @param {any} count \n         * @returns array\n         * @memberof HotKey\n         */\n\n    }, {\n        key: 'shuffle',\n        value: function shuffle(array, count) {\n            var arr = [];\n            var len = Math.min(count, array.length);\n            for (var i = 0; i < len; i++) {\n                var temp = array;\n                var random = Math.floor(Math.random() * temp.length);\n                arr[i] = temp[random];\n                array.splice(random, 1);\n            }\n            return arr;\n        }\n    }]);\n\n    return HotKey;\n}();\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist/app.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4517fabb20cb0544deab","export const RECOMMEND_URL = 'https://shenzekun-qmusic-api.now.sh/'\nexport const TOPLIST_URL = 'https://shenzekun-qmusic-api.now.sh/top'\nexport const SEARCH_URL = 'https://shenzekun-qmusic-api.now.sh/search'\nexport const LYRICS_URL = 'https://shenzekun-qmusic-api.now.sh/lyrics'\nexport const HOTKEYS_URL = 'https://shenzekun-qmusic-api.now.sh/hotkey';\n\n\n// WEBPACK FOOTER //\n// ./js/content.js","export function lazyload() {\n    let imgs = Array.from(document.querySelectorAll('.lazyload'));\n    //判断浏览器是否有IntersectionObserver\n    if ('IntersectionObserver' in window) {\n        let observer = new IntersectionObserver(function(changes) {\n            changes.forEach(change => {\n                if (change.intersectionRatio > 0) {\n                    loadImage(change.target, () => {\n                        observer.unobserve(change.target);\n                    });\n                }\n            });\n        });\n        imgs.forEach(img => {\n            observer.observe(img);\n        });\n    } else {\n        let onscroll = throttle(function() {\n            imgs = imgs.filter(img => img.classList.contains('lazyload'));\n            imgs.forEach(img => isVisible(img) && loadImage(img));\n            //如果图片到没有了，移除监听事件提高性能\n            if (imgs.length === 0) {\n                window.removeEventListener('scroll', onscroll);\n            }\n            imgs.forEach(img => isVisible(img) && loadImage(img));\n        }, 300);\n        window.addEventListener('scroll', onscroll);\n        window.dispatchEvent(new Event('scroll'));\n    }\n}\n\n/**\n * @description 节流\n * @param {any} func 函数\n * @param {any} wait 时间\n * @returns \n */\nfunction throttle(func, wait) {\n    let context, args, timer;\n    let prev = 0;\n    return function fn() {\n        let now = +new Date();\n        let diff = now - prev;\n        context = this;\n        args = arguments;\n        if (!prev || diff >= wait) {\n            func.apply(context, args);\n            prev = now;\n        } else if (diff < wait) {\n            clearTimeout(timer);\n            timer = setTimeout(fn, wait - diff);\n        }\n    };\n}\n/**\n * @description 判断元素是否可见\n * @param {any} img \n * @returns \n */\nfunction isVisible(img) {\n    let { top, left, right, bottom } = img.getBoundingClientRect();\n    let windowWidth = document.documentElement.clientWidth;\n    let windowHeight = document.documentElement.clientHeight;\n    return (\n        ((top > 0 && top < windowHeight) || (bottom > 0 && bottom < windowHeight)) &&\n        ((left > 0 && left < windowWidth) || (right > 0 && right < windowWidth))\n    );\n}\n\n/**\n * @description 加载图片\n * @param {any} img \n * @param {any} callback \n */\nfunction loadImage(img, callback) {\n    let image = new Image();\n    image.src = img.dataset.src;\n    image.onload = () => {\n        img.src = image.src;\n        img.classList.remove('lazyload');\n        if (Object.prototype.toString.call(callback) === '[object Function]') {\n            callback();\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/lazyload.js","import { LYRICS_URL, SEARCH_URL } from './content';\n\n//歌 url\nexport function songUrl(id) {\n    return `http://ws.stream.qqmusic.qq.com/${id}.m4a?fromtag=46`;\n}\n\n//歌词 url\nexport function lyricsUrl(songid) {\n    return `${LYRICS_URL}?id=${songid}`;\n}\n\n//相册\nexport function albumCoverUrl(id) {\n    return `https://y.gtimg.cn/music/photo_new/T002R150x150M000${id}.jpg`;\n}\n\n//处理搜索的 url \n// @param {any} keyword 用户输入的数据\n// @param {number} [page=1]  页数默认为1\nexport function searchUrl(keyword, page = 1) {\n    return `${SEARCH_URL}?keyword=${keyword}&page=${page}`;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/helper.js","\nimport {Recommend} from './recommend.js'\nimport tab from './tab'\nimport {TopList} from './toplist.js'\nimport {Search} from './search'\nimport {MusicPlayer,Progress,LyricsPlayer} from './player';\nimport {HotKey} from './hotkey';\n\nlet recommend = new Recommend(document.querySelector('.rec-view')).start()\n\nlet hotkey = new HotKey(document.querySelector('.result-tags')).start()\n\nlet search = new Search().search();\n\nlet toplist = new TopList(document.querySelector('.rec-view')).start()\n\nlet player = new MusicPlayer(document.querySelector('#player'));\n\ndocument.querySelector('#show_player').addEventListener('click',() => {\n    player.show();\n})\n\nonHashChange();\n\naddEventListener('hashchange',onHashChange);\n\nfunction onHashChange() {\n    let hash = location.hash\n    if (/#player\\?.+/.test(hash)) {\n        let matches = hash.slice(hash.indexOf('?') + 1).match(/(\\w+)=([^&]+)/g)\n        let options = matches && matches.reduce((res, cur) => {\n            let arr = cur.split('=')\n            res[arr[0]] = decodeURIComponent(arr[1])\n            return res\n        },{})\n        // console.log(options);\n        player.play(options);\n    } else {\n        player.hide();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/app.js","import { RECOMMEND_URL } from './content.js';\nimport { Slider } from './slider.js';\nimport { lazyload } from './lazyload.js';\nexport class Recommend {\n    constructor(el) {\n        this.el = el;   \n    }\n    /**\n     * @description 开始\n     * @memberof Recommend\n     */\n    start() {\n        if ('fetch' in window) {\n            fetch(RECOMMEND_URL)\n                .then(res => res.json())\n                .then(json => (this.json = json))\n                .then(() => this.render());\n        } else {\n            //如果不兼容 fetch\n            let xhr;\n            let _this = this;\n            if (window.XMLHttpRequest) {\n                xhr = new XMLHttpRequest();\n            } else {\n                //兼容 ie6\n                xhr = new ActiveXObject('Microsoft.XMLHTTP');\n            }\n            //连接\n            xhr.open('GET', RECOMMEND_URL, true);\n            //发送请求\n            xhr.send();\n\n            xhr.onreadystatechange = function() {\n                //读取完成\n                if (xhr.readyState === 4) {\n                    if (xhr.status === 200) {\n                        _this.json = JSON.parse(xhr.responseText);\n                        _this.render();\n                    } else {\n                        console.log('失败' + xhr.status);\n                    }\n                }\n            };\n        }\n    }\n    /**\n     * @description 渲染数据\n     * @memberof Recommend\n     */\n    render() {\n        document.querySelector('.loading').classList.add('hide');\n        this.renderSlider(this.json.data.slider);\n        this.renderRadios(this.json.data.radioList);\n        this.renderPlayList(this.json.data.songList);\n        lazyload();\n    }\n    /**\n     * @description 渲染轮播图\n     * @param {any} slides \n     * @memberof Recommend\n     */\n    renderSlider(slides) {\n        this.slider = new Slider({\n            el: this.el.querySelector('#slider'),\n            slides: slides.map(slide => ({\n                link: slide.linkUrl,\n                image: slide.picUrl\n            }))\n        });\n    }\n\n    /**\n     * @description 渲染电台部分\n     * @param {any} radios \n     * @memberof Recommend\n     */\n    renderRadios(radios) {\n        document.querySelector('.radios .list').innerHTML = radios.map(radio => `<div class=\"list-item\">\n                <div class=\"list-media\">\n                    <img data-src=\"${radio.picUrl}\" class=\"lazyload\" src=\"./images/default_pic.jpg\">\n                    <span class=\"icon icon_play\"></span>\n                </div>\n                <div class=\"list-info\">${radio.Ftitle}</div>\n            </div>`).join('');\n    }\n\n    /**\n     * @description 渲染推荐页的热门歌单\n     * @param {any} playlists \n     * @memberof Recommend\n     */\n    renderPlayList(playlists) {\n        document.querySelector('.playlists .list').innerHTML = playlists.map(list => `<div class=\"list-item\">\n            <a href='https://y.qq.com/w/taoge.html?ADTAG=myqq&from=myqq&channel=10007100&id=${list.id}'>\n            <div class=\"list-media\">\n                <img class=\"lazyload\" data-src=\"${list.picUrl}\" src=\"./images/default_pic.jpg\">\n                <span class=\"listen_count\"><span class=\"icon icon_listen\"></span>${(list.accessnum / 10000).toFixed(1) +\n                    '万'}</span>\n                <span class=\"icon icon_play\"></span>\n            </div>\n            <div class=\"list-info\">\n                <div class=\"list_tit\">${list.songListDesc}</div>\n                <div class=\"list-text\"></div>\n            </div>\n            </a>\n        </div>`).join('');\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/recommend.js","export class Slider {\n    constructor(options = {}) {\n        this.el = options.el;\n        this.slides = options.slides;\n        this.interval = options.interval || 2000;\n        this.index = 0;\n        this.width = 0;//每张图片的大小的宽度\n        this.touchX = 0; //触控开始的手指最初落点\n        this.ready_moved = true; //判断每次滑动开始的标记变量\n        this.render();\n        this.bindEvent();\n        this.start();\n        this.onresize();\n    }\n    /**\n     * @description 当窗口发生变化的时候，获取屏幕宽度，使图片发生改变\n     * @memberof Slider\n     */\n    onresize(){\n        let _this = this;\n        window.addEventListener('resize',function(){\n            _this.width = _this.el.clientWidth;\n        })\n    }\n    /**\n     * @description 渲染\n     * @memberof Slider\n     */\n    render() {\n        this.el.innerHTML = `<div class=\"qq-slider-wrap\"></div>\n        <p class=\"ui-slider-dots\">\n        <b class=\"active\"></b>\n        <b class=\"\"></b>\n        <b class=\"\"></b>\n        <b class=\"\"></b>\n        <b class=\"\"></b>\n        </p>`;\n        this.dots = document.querySelector('.ui-slider-dots');\n        this.wrap = this.el.firstElementChild;\n        this.wrap.style.width = `${(this.slides.length + 1) * 100}%`;\n        this.wrap.innerHTML = this.slides.map(slide => `<div class=\"qq-slider-item\">\n          <a href=\"${slide.link}\">\n            <img src=\"${slide.image}\">\n          </a>\n      </div>`).join('');\n        this.width = this.el.clientWidth\n        let first = this.wrap.firstElementChild;\n        this.wrap.insertAdjacentHTML('beforeend', this.domToString(first)); //无缝滚动拷贝第一个到到容器的最后一个\n    }\n\n    /**\n     * @description dom 元素转为字符串\n     * @param {any} node \n     * @returns string\n     * @memberof Slider\n     */\n    domToString (node) {  \n        let tmpNode = document.createElement('div');\n        tmpNode.appendChild(node.cloneNode(true)); \n        let str = tmpNode.innerHTML;\n        tmpNode = node = null; // 解除引用，以便于垃圾回收  \n        return str;  \n    } \n     \n    /**\n     * @description 自动播放\n     * @memberof Slider\n     */\n    autoPlay() {\n        this.timer = setInterval(this.next.bind(this), this.interval);\n    }\n    \n    /**\n     * @description 开始播放\n     * @memberof Slider\n     */\n    start() {\n        this.autoPlay()\n    }\n    \n    /**\n     * @description 下一张\n     * @returns \n     * @memberof Slider\n     */\n    next() {\n        //先判断在加\n        if (this.index === this.slides.length) { //5\n            this.index = 0;\n            this.wrap.style.left = '0';\n        }\n        this.index += 1;\n        this.animate(this.wrap,-this.width * this.index)\n        this.setActiveDot();\n    }\n\n    /**\n     * @description 动画\n     * @param {any} obj \n     * @param {any} target \n     * @memberof Slider\n     */\n    animate(obj, target) {\n        clearInterval(obj.timer);\n        obj.timer = setInterval(function () {\n            let leader = obj.offsetLeft;\n            let step = (target - leader) / 2\n            step = step > 0 ? Math.ceil(step) : Math.floor(step);\n            leader = leader + step;\n            obj.style.left = leader + 'px';\n            if (leader === target) {\n                clearInterval(obj.timer);\n            }\n        },30);\n    }\n\n    /**\n     * @description 上一张\n     * @returns \n     * @memberof Slider\n     */\n    pre() {\n        if (this.index === 0) {\n            this.index = this.slides.length\n            this.wrap.style.left = `-${this.index * this.width}px`;\n        }\n        this.index -= 1; \n        this.animate(this.wrap,-this.index * this.width)\n        this.setActiveDot();\n    }\n\n    /**\n     * @description 设置激活的小点\n     * @memberof Slider\n     */\n    setActiveDot() {\n        let len = this.dots.children.length;\n        for (let i = 0; i <= len; i++) {\n            let b = document.getElementsByTagName('b')[i];\n            if (b) b.classList.remove('active');//判断 b 是否存在\n            if (this.index === i) {\n                if (b) b.classList.add('active');\n            }\n            if (this.index === 5) { //如果 index 等于5 那么将圆点变为第一个\n                b = document.getElementsByTagName('b')[0]\n                b.classList.add('active');\n            }\n        }\n    }\n\n    /**\n     * @description 绑定事件\n     * @memberof Slider\n     */\n    bindEvent() {\n        this.wrap.addEventListener('touchstart', this.touchstart.bind(this));\n        this.wrap.addEventListener('touchmove',this.touchmove.bind(this));\n        this.wrap.addEventListener('touchend', this.touchend.bind(this));\n    }\n    /**\n     * @description touchstart事件\n     * @param {any} e \n     * @memberof Slider\n     */\n    touchstart(e) {\n        clearInterval(this.timer);\n        if (this.ready_moved) {\n            let touch = e.targetTouches[0];\n            this.touchX = touch.clientX;\n            this.ready_moved = false;\n        }\n    }\n    /**\n     * @description touchmove 事件\n     * @param {any} e \n     * @memberof Slider\n     */\n    touchmove(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        clearInterval(this.timer);\n        if (!this.ready_moved) {\n            let move = e.changedTouches[0];\n            let moveAt = move.clientX;\n            let diff = moveAt - this.touchX;\n            let offset = -this.index * this.width;//一张图片的偏移量\n            if (diff > 0 && diff <= this.width && (offset + diff) < 0) { //向右移，并且 diff 要小于一张图片的宽度\n                this.animate(this.wrap,offset + diff);\n            } else if (diff < 0 && Math.abs(diff) <= this.width && (offset - Math.abs(diff)) > (-this.slides.length * this.width)) { //向左移,并且 diff 要小于一张图片的宽度\n                this.animate(this.wrap,offset - Math.abs(diff))\n            } else if ((offset + diff) > 0) { //当临界值在第一张向左移的时候\n                if (this.index === 0) {\n                    this.index = this.slides.length\n                    this.wrap.style.left = `-${this.index * this.width}px`;\n                }\n                this.animate(this.wrap,-(this.index * this.width) + diff)\n            } else if (offset - diff < this.width * this.slides.length) { //当最后一张向右移的时候\n                if (this.index === this.slides.length) {\n                    this.index = 0;\n                    this.wrap.style.left = `-${this.index * this.width}px`;\n                }\n                this.animate(this.wrap,-(this.index * this.width) - diff);\n            }\n        }\n    }\n    /**\n     * @description touchend事件\n     * @param {any} e \n     * @memberof Slider\n     */\n    touchend(e) {\n        let _this = this;\n        if (!_this.ready_moved) {\n            clearInterval(_this.timer);\n            let release = e.changedTouches[0];\n            let releasedAt = release.clientX;\n            let diff = releasedAt - _this.touchX;\n            if (diff > (_this.width / 2)) { //当右移滑动距离大于图片宽度的一半时\n                _this.pre();\n                _this.autoPlay();\n                _this.ready_moved = true;\n            } else if (diff < -(_this.width / 2)) { //当左移滑动距离小于宽度的一半时（-400px < -360px）\n                _this.next();\n                _this.autoPlay();\n                _this.ready_moved = true;\n            } else { //回到原来的图片\n                _this.animate(_this.wrap,-_this.index * _this.width);\n                _this.autoPlay();\n                _this.ready_moved = true;\n            }\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/slider.js","document.addEventListener('touchstart', event => {\n    let target = event.target;\n    if (target.dataset.role !== 'tab') return;\n    [].forEach.call(target.parentElement.children, tab => {\n        tab.classList.remove('active');\n    });\n    target.classList.add('active');\n    let content = document.querySelector(target.dataset.view);\n    if (content) {\n        [].forEach.call(content.parentElement.children, child => {\n            child.style.display = 'none';\n        });\n        content.style.display = 'block';\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./js/tab.js","import { TOPLIST_URL } from './content';\nimport { lazyload } from './lazyload.js';\nexport class TopList {\n    constructor(el) {\n        this.el = el;\n    }\n    /**\n     * @description 开始\n     * @memberof TopList\n     */\n    start() {\n        if ('fetch' in window) {\n            fetch(TOPLIST_URL)\n                .then(res => res.json())\n                .then(json => (this.list = json.data.topList))\n                .then(() => this.render());\n        } else {\n            let xhr\n            let _this = this\n            if (window.XMLHttpRequest) {\n                xhr = new XMLHttpRequest()\n            } else {\n                xhr = new ActiveXObject('Microsoft.XMLHTTP')\n            }\n            xhr.open('GET',TOPLIST_URL,true)\n            xhr.send()\n            xhr.onreadystatechange = () => {\n                if (xhr.readyState === 4) {\n                    if (xhr.status === 200) {\n                        _this.json = JSON.parse(xhr.responseText)\n                        _this.render()\n                    } else {\n                        console.log('失败' + xhr.status)\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * @description 渲染\n     * @memberof TopList\n     */\n    render() {\n        document.querySelector('.toplist').innerHTML = this.list.map(item => `<li class=\"top-item\">\n        <div class=\"top-item-media\">\n          <a href='https://y.qq.com/w/toplist.html?ADTAG=myqq&from=myqq&channel=10007100&id=${item.id}&type=top'>\n            <img class=\"lazyload\" data-src=\"${item.picUrl.replace('http://', 'https://')}\" src=\"./images/default_pic.jpg\">\n            <span class=\"listen_count\"><i class=\"icon icon-listen\"></i>${(item.listenCount / 10000).toFixed(1) + '万'}</span>\n          </a>\n        </div>\n        <a href='https://y.qq.com/w/toplist.html?ADTAG=myqq&from=myqq&channel=10007100&id=${item.id}&type=top'>\n            <div class=\"top-item-info\">\n            <h3 class=\"top-item-title ellipsis\">${item.topTitle}</h3>\n            <ul class=\"top-item-list\">${this.songlist(item.songList)}</ul>\n            </div>\n        </a>\n      </li>`).join('');\n        lazyload(this.el.querySelectorAll('.lazyload'));\n    }\n\n    /**\n     * @description 获取歌\n     * @param {any} songs 返回字符串\n     * @returns \n     * @memberof TopList\n     */\n    songlist(songs) {\n        return songs.map((song,i) => `<li class=\"top-item-song\">\n        <i class=\"song-index\">${i + 1}</i>\n        <span class=\"song-name\">${song.songname}</span>- ${song.singername}\n      </li>`).join('')\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/toplist.js","import {searchUrl} from './helper';\n\nexport class Search {\n    constructor() {\n        this.input = document.querySelector('#search')\n        this.songs = document.querySelector('.song-list')\n        this.songsObject = {}//存放歌曲\n        this.keyword = '' //输入搜索的值\n        this.page = 1//默认页数为1\n        this.isLoad = true //能否继续加载数据\n        this.fetching = false //正在 fetch\n        this.history = []\n        this.delete = document.querySelector('.icon-delete')\n        this.cancel = document.querySelector('.search-cancel')\n        this.hotKeys = document.querySelector('#hot-keys')\n        this.recordKeys = document.querySelector('.record-keys')\n        this.input.addEventListener('keyup',this.onEnter.bind(this))\n\n        window.addEventListener('scroll',this.onScroll.bind(this))\n        window.addEventListener('click',this.onClick.bind(this))\n\n        this.HISTORY_KEY = 'search_history'\n        this.history = localStorage.getItem(this.HISTORY_KEY) ? localStorage.getItem(this.HISTORY_KEY).split(',') : []\n    }\n\n    /**\n     * @description enter 事件\n     * @param {any} event \n     * @returns \n     * @memberof Search\n     */\n    onEnter(event) {\n        //获取输入的值,并且去除两边的空格\n        let keyword = event.target.value.trim()\n        if (keyword) {\n            this.delete.classList.remove('hide')\n        } else {\n            this.delete.classList.add('hide')\n            return this.reset()\n        }\n        //如果不是 enter 直接返回\n        if (event.keyCode !== 13) return\n        this.recordKeys.classList.add('hide')\n        this.addHistory(keyword)\n        this.search(keyword)\n    }\n\n    /**\n     * @description 点击事件\n     * @param {any} e \n     * @memberof Search\n     */\n    onClick(e) {\n        // console.log(e.target);\n        //如果点击到了输入按钮\n        if (e.target === this.input) {\n            this.cancel.classList.remove('hide')\n            this.hotKeys.classList.add('hide')\n            this.recordKeys.classList.remove('hide')\n            this.renderHistory()\n            this.reset()\n        }\n        //如果点击到了取消按钮\n        if (e.target === this.cancel) {\n            this.cancel.classList.add('hide')\n            this.delete.classList.add('hide')\n            this.hotKeys.classList.remove('hide')\n            this.recordKeys.classList.add('hide')\n            this.input.value = ''\n            this.reset()\n        }\n        //如果点击到了删除按钮\n        if (e.target === this.delete) {\n            this.input.value = ''\n            this.delete.classList.add('hide')\n            this.reset()\n        }\n        //如果匹配到了清除搜索记录\n        if (e.target.matches('.record-delete')) {\n            this.history = []\n            localStorage.setItem(this.HISTORY_KEY,this.history)\n            this.recordKeys.innerHTML = ''\n        }\n        //如果匹配到了单条记录的删除按钮\n        if (e.target.matches('.icon-close')) {\n            const index = this.history.indexOf(e.target.previousElementSibling.innerHTML)\n            this.history.splice(index,1)\n            localStorage.setItem(this.HISTORY_KEY,this.history)\n            this.renderHistory()\n        }\n        if (e.target.matches('.tag-keyword') || e.target.matches('.record-con')) {\n            console.log(e.target.innerHTML)\n            this.input.value = e.target.innerHTML\n            this.keyword = e.target.innerHTML\n            this.delete.classList.remove('hide')\n            this.cancel.classList.remove('hide')\n            this.hotKeys.classList.add('hide')\n            this.addHistory(this.keyword)\n            this.search(this.keyword)\n        }\n    }\n\n    /**\n     * @description 添加历史\n     * @param {any} keyword \n     * @memberof Search\n     */\n    addHistory(keyword) {\n        console.log('keyword' + keyword);\n        let index = this.history.indexOf(keyword);\n        if (index === -1) {\n            this.history.unshift(keyword)\n            localStorage.setItem(this.HISTORY_KEY,this.history)\n        }\n    }\n\n    /**\n     * @description 渲染历史\n     * @memberof Search\n     */\n    renderHistory() {\n        if (this.history.length > 0) {\n            let historyHTML = this.history.map(item => `\n                <li>\n                    <a href=\"#\" class=\"record-main\">\n                        <span class=\"icon icon-clock\"></span>\n                        <span class=\"record-con ellipsis\">${item}</span>\n                        <span class=\"icon icon-close\"></span>\n                    </a>\n                </li>\n            `).join('')\n            historyHTML += `\n                <p class=\"record-delete\">清除搜索记录</p>\n            `\n            // console.log(historyHTML)\n            // console.log(this.recordKeys)\n            this.recordKeys.innerHTML = historyHTML\n        } else if (this.history.length === 0) {\n            this.recordKeys.innerHTML = ''\n            this.history = []\n        }\n    }\n\n    /**\n     * @description 重置\n     * @memberof Search\n     */\n    reset() {\n        this.page = 1\n        this.keyword = ''\n        this.isLoad = true\n        this.songsObject = {}\n        this.songs.innerHTML = ''\n        document.querySelector('.loading-icon').style.display = 'block'\n        document.querySelector('.loading-text').style.display = 'block'\n        document.querySelector('.loading-done').style.display = 'none'\n        document.querySelector('.search-loading').classList.remove('show')\n    }\n\n    /**\n     * @description 滚动事件\n     * @param {any} e \n     * @returns \n     * @memberof Search\n     */\n    onScroll(e) {\n        if (this.isLoad) {\n            if (document.documentElement.clientHeight + pageYOffset > document.body.scrollHeight - 100) {\n                this.search(this.keyword,this.page + 1)\n            }\n        } else {\n            return window.removeEventListener('scroll', this.onScroll.bind(this))\n        }\n    }\n\n    /**\n     * @description 搜索\n     * @param {any} keyword 用户输入的数据\n     * @param {any} page 页数\n     * @memberof Search\n     */\n    search(keyword, page) {\n        //刚进来时 keyword为 undefined ，因为没有 enter\n        if (keyword === undefined) keyword = ''\n        if (keyword === '') return\n        //如果已经搜索过，并且没有改动 keyword 那么直接返回\n        if (this.keyword === keyword && this.songsObject[page || this.page]) return\n        if (this.keyword !== keyword) this.reset()\n        if (this.fetching || !this.isLoad) return\n        this.keyword = keyword \n        this.loading()\n        fetch(searchUrl(this.keyword,page || this.page))\n            .then(res => res.json())\n            .then(json => {\n                this.page = json.data.song.curpage\n                this.songsObject[this.page] = json.data.song.list\n                this.isLoad = (json.message !== 'no results')\n                return json.data.song.list\n            })\n            .then(songs => this.append(songs))\n            .then(() => this.accomplish())\n            .catch(() => console.log('error'))\n    }\n\n    /**\n     * @description 添加歌曲的html到页面\n     * @param {any} songs \n     * @memberof Search\n     */\n    append(songs) {\n        let html = songs.map(song => {\n            let artist = song.singer.map(s => s.name).join('')\n            return `<a class=\"song-item\"\n               href=\"#player?artist=${artist}&songid=${song.songid}&songname=${song.songname}&albummid=${song.albummid}&duration=${song.interval}\">\n              <i class=\"icon icon-music\"></i>\n              <div class=\"song-name\">${song.songname}</div>\n              <div class=\"song-artist\">${artist}</div>\n            </a>`\n        }).join('')\n        this.songs.insertAdjacentHTML('beforeend', html)\n    }\n\n    /**\n    * @description 函数加载\n    * @memberof Search\n    */\n    loading(){\n        this.fetching = true\n        document.querySelector('.search-loading').classList.add('show')\n    }\n\n    /**\n     * @description 函数加载完成\n     * @memberof Search\n     */\n    accomplish() {\n        this.fetching = false\n        if (!this.isLoad) { //如果不能加载了，就显示已加载全部\n            document.querySelector('.loading-icon').style.display = 'none'\n            document.querySelector('.loading-text').style.display = 'none'\n            document.querySelector('.loading-done').style.display = 'block'\n        } else { \n            document.querySelector('.search-loading').classList.remove('show')\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./js/search.js","import {\n    songUrl,\n    lyricsUrl,\n    albumCoverUrl\n} from './helper.js'\n\n/**\n * @description 音乐播放器界面\n * @export\n * @class MusicPlayer\n */\nexport class MusicPlayer {\n    constructor(el) {\n        this.el = el;\n        this.el.addEventListener('click', this.handleEvent.bind(this));\n        this.audio = this.createAudio();\n        this.lyrics = new LyricsPlayer(this.el.querySelector('.player-lyrics'), this.audio)\n        this.progress = new Progress(this.el.querySelector('.progress'))\n        this.fetching = false;\n    }\n    /**\n     * @description 创建 audio\n     * @returns HTMLAudioElement\n     * @memberof MusicPlayer\n     */\n    createAudio() {\n        let audio = document.createElement('audio');\n        audio.id = `player-${Math.floor(Math.random() * 100)}-${+new Date()}`;\n        // console.log(audio.id)\n        //播放结束的时候\n        audio.addEventListener('ended', () => {\n            this.audio.play();\n            this.lyrics.restart();\n            this.progress.restart();\n        })\n        document.body.appendChild(audio);\n        return audio;\n    }\n    /**\n     * @description 处理事件\n     * @param {any} event \n     * @memberof MusicPlayer\n     */\n    handleEvent(event) {\n        let target = event.target;\n        // console.log(target);\n        switch (true) {\n        case target.matches('.icon-play'):\n            this.onPlay(event);\n            break;\n        case target.matches('.icon-pause'):\n            this.onPause(event);\n            break;\n        case target.matches('.icon-list'):\n            this.hide();\n            break;\n        }\n    }\n    /**\n     * @description 显示 play 按钮\n     * @param {any} event \n     * @memberof MusicPlayer\n     */\n    onPlay(event) {\n        //如果正在 fetching 返回\n        if (this.fetching) return\n        this.audio.play()\n        this.lyrics.start()\n        this.progress.start()\n        event.target.classList.remove('icon-play');\n        event.target.classList.add('icon-pause');\n    }\n\n    /**\n     * @description 播放\n     * @param {any} [options={}] \n     * @returns \n     * @memberof MusicPlayer\n     */\n    play(options = {}) {\n        if (!options) return 0;\n        this.el.querySelector('.song-name').innerText = options.songname;\n        this.el.querySelector('.song-artist').innerText = options.artist;\n        this.progress.reset(options.duration);\n\n        //设置背景图和头像\n        let coverUrl = albumCoverUrl(options.albummid);\n        this.el.querySelector('.album-cover').src = coverUrl;\n        this.el.querySelector('.player-background').style.backgroundImage = `url(${coverUrl})`;\n\n        if (options.songid) {\n            if (this.songid !== options.songid) {\n                this.el.querySelector('.icon-action').className = 'icon-action icon-play';\n            }\n\n            this.songid = options.songid;\n            this.audio.src = songUrl(this.songid);\n            this.fetching = true;\n            fetch(lyricsUrl(this.songid))\n                .then(res => res.json())\n                .then(json => json.lyric)\n                .then(text => this.lyrics.reset(text))\n                .catch((err) => alert(err))\n                .then(() => {\n                    this.fetching = false;\n                })\n        }\n        this.show()\n    }\n    /**\n     * @description 显示暂停按钮\n     * @param {any} event \n     * @memberof MusicPlayer\n     */\n    onPause(event) {\n        this.audio.pause()\n        this.lyrics.pause()\n        this.progress.pause()\n        event.target.classList.remove('icon-pause');\n        event.target.classList.add('icon-play');\n    }\n    /**\n     * @description 显示播放器\n     * @memberof MusicPlayer\n     */\n    show() {\n        this.el.classList.add('show');\n        document.body.classList.add('noscroll')\n    }\n    /**\n     * @description 隐藏播放器\n     * @memberof MusicPlayer\n     */\n    hide() {\n        this.el.classList.remove('show');\n        document.body.classList.remove('noscroll')\n    }\n}\n\n/**\n * @description 进度条\n * @export\n * @class Progress\n */\nclass Progress {\n    constructor(el, duration, start) {\n        this.$el = el;\n        this.elapsed = 0; //当前时间\n        this.duration = duration || 0; //持续时间\n        this.progress = 0; //进度条\n        this.render();\n        this.$progress = this.$el.querySelector('.progress-bar-progress')\n        this.$elapsed = this.$el.querySelector('.progress-elapsed')\n        this.$duration = this.$el.querySelector('.progress-duration')\n        this.$elapsed.innerText = this.formatTime(this.elapsed)\n        this.$duration.innerText = this.formatTime(this.duration)\n        if (start) this.start()\n    }\n    /**\n     * @description 重新开始\n     * @memberof Progress\n     */\n    restart() {\n        this.reset();\n        this.start();\n    }\n    /**\n     * @description 开始\n     * @memberof Progress\n     */\n    start() {\n        this.pause()\n        this.intervalId = setInterval(this.update.bind(this), 50)\n    }\n    /**\n     * @description 更新时间\n     * @memberof Progress\n     */\n    update() {\n        this.elapsed += 0.05\n        //如果当前时间大于总的持续时间的话就时间重置\n        if (this.elapsed >= this.duration) this.reset()\n        this.progress = this.elapsed / this.duration\n        this.$progress.style.transform = `translate(${this.progress * 100 - 100}%)`\n        this.$elapsed.innerText = this.formatTime(this.elapsed)\n    }\n    /**\n     * @description 清除计时器\n     * @memberof Progress\n     */\n    pause() {\n        clearInterval(this.intervalId)\n    }\n    /**\n     * @description 重置\n     * @param {any} duration \n     * @memberof Progress\n     */\n    reset(duration) {\n        this.pause()\n        this.elapsed = 0\n        this.progress = 0\n        this.$progress.style.transform = 'translate(-100%)';\n        this.$elapsed.innerText = this.formatTime(this.elapsed);\n        if (duration) {\n            this.duration = +duration\n            this.$duration.innerText = this.formatTime(this.duration)\n        }\n    }\n    /**\n     * @description 渲染\n     * @memberof Progress\n     */\n    render() {\n        this.$el.innerHTML = `\n          <div class=\"progress-time progress-elapsed\"></div>\n            <div class=\"progress-bar\">\n              <div class=\"progress-bar-progress\"></div>\n            </div>\n          <div class=\"progress-time progress-duration\"></div>\n        `\n    }\n    /**\n     * @description 格式化时间毫秒\n     * @param {any} seconds \n     * @returns 返回 05:10这种形式的时间\n     * @memberof Progress\n     */\n    formatTime(seconds) {\n        let mins = Math.floor(seconds / 60)\n        let secs = Math.floor(seconds % 60)\n        if (mins < 10) mins = '0' + mins\n        if (secs < 10) secs = '0' + secs\n        return `${mins}:${secs}`\n    }\n}\n\n/**\n * @description 歌词\n * @export\n * @class LyricsPlayer\n */\nclass LyricsPlayer {\n    constructor(el, audio) {\n        this.$el = el\n        this.$el.innerHTML = '<div class=\"player-lyrics-lines\"></div>'\n        this.$lines = this.$el.querySelector('.player-lyrics-lines')\n        this.$audio = audio\n        this.text = '' //歌词文本\n        this.index = 0 //页数\n        this.lyrics = [] //歌词数组\n        this.reset(this.text)\n    }\n    start() {\n        this.pause()\n        this.intervalId = setInterval(this.update.bind(this), 1000);\n    }\n    /**\n     * @description 重新开始\n     * @memberof LyricsPlayer\n     */\n    restart() {\n        this.reset()\n        this.start()\n    }\n    pause() {\n        clearInterval(this.intervalId)\n    }\n    /**\n     * @description 更新歌词\n     * @memberof LyricsPlayer\n     */\n    update() {\n        let _this = this;\n        this.$audio.ontimeupdate = function (e) {\n            for (let i = 0, l = _this.lyrics.length; i < l; i++) {\n                // console.log(this.currentTime,_this.getSeconds(_this.lyrics[i]));\n                if (this.currentTime /*当前播放的时间*/ > _this.getSeconds(_this.lyrics[i]) - 0.50) {\n                    //显示到页面\n                    _this.$lines.children[_this.index].classList.remove('active');\n                    _this.$lines.children[i].classList.add('active');\n                    _this.index = i;\n                }\n            }\n        }\n        //如果歌词页数大于2的话，歌词向上翻\n        if (this.index > 2) {\n            let y = -(this.index - 2) * this.LINE_HEIGHT;\n            this.$lines.style.transform = `translateY(${y}px)`\n        }\n    }\n    /**\n     * @description 重置\n     * @param {any} text \n     * @memberof LyricsPlayer\n     */\n    reset(text) {\n        this.pause();\n        this.index = 0;\n        this.$lines.style.transform = `translateY(0)`;\n        let $active = this.$lines.querySelector('.active');\n        if ($active) {\n            $active.classList.remove('active')\n        }\n        if (text) {\n            this.text = this.formatText(text) || '';\n            this.lyrics = this.text.match(/^\\[\\d{2}:\\d{2}.\\d{2}\\](.+)$/gm) || [];\n            //如果 lyrics 数组有长度\n            if (this.lyrics.length) this.render();\n        }\n\n        if (this.lyrics.length) {\n            this.$lines.children[this.index].classList.add('active')\n        }\n    }\n    //获取秒数\n    getSeconds(line) {\n        return +line.replace(/^\\[(\\d{2}):(\\d{2}\\.\\d{2}).*/, (match, p1, p2) => (+p1) * 60 + parseFloat(+p2));\n    }\n    /**\n     * @description 渲染\n     * @memberof LyricsPlayer\n     */\n    render() {\n        let html = this.lyrics.map(line => `\n          <div class=\"player-lyrics-line\">${line.slice(10)}</div>\n        `).join('')\n        this.$lines.innerHTML = html\n    }\n    /**\n     * @description 格式化文本 类似⬇️\n     * [xx:xx.xx]xxxxx\n     * [xx:xx.xx]xxxxx\n     * [xx:xx.xx]xxxxx\n     * @param {any} text \n     * @returns \n     * @memberof LyricsPlayer\n     */\n    formatText(text) {\n        let div = document.createElement('div')\n        div.innerHTML = text\n        return div.innerText\n    }\n}\n\nLyricsPlayer.prototype.LINE_HEIGHT = 42\n\n\n// WEBPACK FOOTER //\n// ./js/player.js","import {HOTKEYS_URL} from './content';\n\nexport class HotKey {\n    constructor(el) {\n        this.el = el\n    }\n    start() {\n        fetch(HOTKEYS_URL)\n            .then(res => res.json())\n            .then(json => this.render(json.data))\n    }\n    /**\n     * @description 渲染数据\n     * @param {any} data \n     * @memberof HotKey\n     */\n    render(data) {\n        let keys = data.hotkey\n        let hotKeys = this.shuffle(keys,6).map(hotkey => `\n            <a href=\"#\" class=\"tag tag-keyword\">${hotkey.k}</a>\n        `)\n        // console.log(hotkeys);\n        this.el.innerHTML = `<a href=\"${data.special_url}\" class=\"tag tag-hot\">${data.special_key}</a>` + hotKeys;\n    }\n    /**\n     * @description 洗牌\n     * @param {any} array \n     * @param {any} count \n     * @returns array\n     * @memberof HotKey\n     */\n    shuffle(array,count) {\n        let arr = [];\n        let len = Math.min(count, array.length);\n        for (let i = 0;i < len;i++) {\n            let temp = array\n            let random = Math.floor(Math.random() * temp.length);\n            arr[i] = temp[random]\n            array.splice(random,1) \n        }\n        return arr\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./js/hotkey.js"],"sourceRoot":""}