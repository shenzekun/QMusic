!function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";var i=n(1),s=n(5);(function(e){e&&e.__esModule})(s),new i.Recommend(document.querySelector(".rec-view")).start()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Recommend=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),o=n(3),a=n(4);t.Recommend=function(){function e(t){i(this,e),this.el=t}return s(e,[{key:"start",value:function(){var e=this;if("fetch"in window)fetch(r.RECOMMEND_URL).then(function(e){return e.json()}).then(function(t){return e.json=t}).then(function(){return e.render()});else{var t=void 0,n=this;t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t.open("GET",r.RECOMMEND_URL,!0),t.send(),t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(n.json=JSON.parse(t.responseText),n.render()):console.log("失败"+t.status))}}}},{key:"render",value:function(){document.querySelector(".loading").classList.add("hide"),this.renderSlider(this.json.data.slider),this.renderRadios(this.json.data.radioList),this.renderPlayList(this.json.data.songList),(0,a.lazyload)()}},{key:"renderSlider",value:function(e){this.slider=new o.Slider({el:this.el.querySelector("#slider"),slides:e.map(function(e){return{link:e.linkUrl,image:e.picUrl}})})}},{key:"renderRadios",value:function(e){document.querySelector(".radios .list").innerHTML=e.map(function(e){return' <div class="list-item">\n                <div class="list-media">\n                    <img data-src="'+e.picUrl+'" class="lazyload">\n                    <span class="icon icon_play"></span>\n                </div>\n                <div class="list-info">'+e.Ftitle+"</div>\n            </div>"}).join("")}},{key:"renderPlayList",value:function(e){document.querySelector(".playlists .list").innerHTML=e.map(function(e){return'<div class="list-item">\n            <div class="list-media">\n                <img class="lazyload" data-src="'+e.picUrl+'">\n                <span class="listen_count"><span class="icon icon_listen"></span>'+(e.accessnum/1e4).toFixed(1)+'万</span>\n                <span class="icon icon_play"></span>\n            </div>\n            <div class="list-info">\n                <div class="list_tit">'+e.songListDesc+'</div>\n                <div class="list-text"></div>\n            </div>\n        </div>'}).join("")}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RECOMMEND_URL="https://qq-music-api.now.sh",t.TOPLIST_URL="https://qq-music-api.now.sh/top",t.SEARCH_URL="https://qq-music-api.now.sh/search",t.LYRICS_URL="https://qq-music-api.now.sh/lyrics"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.Slider=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.el=t.el,this.slides=t.slides,this.interval=t.interval||3e3,this.index=0,this.touchX,this.ready_moved=!0,this.screenWidth=document.documentElement.clientWidth,this.render(),this.bindEvent(),this.start()}return s(e,[{key:"render",value:function(){this.el.innerHTML='<div class="qq-slider-wrap"></div>\n     <p class="ui-slider-dots">\n      <b class="active"></b>\n      <b class=""></b>\n      <b class=""></b>\n      <b class=""></b>\n      <b class=""></b>\n    </p>',this.dots=document.querySelector(".ui-slider-dots"),this.wrap=this.el.firstElementChild,this.wrap.style.width=100*this.slides.length+"%",this.wrap.innerHTML=this.slides.map(function(e){return'<div class="qq-slider-item">\n          <a href="'+e.link+'">\n            <img src="'+e.image+'">\n          </a>\n      </div>'}).join("")}},{key:"start",value:function(){}},{key:"next",value:function(){if(this.index+=1,this.index%this.slides.length==0)return this.wrap.style.transform="translate(0)",this.index=0,void this.setActiveDot();this.wrap.style.transform="translate(-"+100*this.index/this.slides.length+"%)",this.setActiveDot()}},{key:"pre",value:function(){if(this.index-1<0?this.index=this.slides.length+this.index-1:this.index-=1,this.index%this.slides.length==0)return this.wrap.style.transform="translate(0)",this.index=0,void this.setActiveDot();this.wrap.style.transform="translate(-"+(this.slides.length+this.index)%this.slides.length*100/this.slides.length+"%)",this.setActiveDot()}},{key:"setActiveDot",value:function(){for(var e=this.dots.children.length,t=0;t<e;t++){document.getElementsByTagName("b")[t].classList.remove("active")}for(var n=0;n<e;n++){var i=document.getElementsByTagName("b")[n];this.index===n&&(i.classList.add("active"),console.log("1"))}}},{key:"bindEvent",value:function(){this.wrap.addEventListener("touchstart",this.touchstart.bind(this)),this.wrap.addEventListener("touchend",this.touchend.bind(this))}},{key:"touchstart",value:function(e){if(this.ready_moved){var t=e.targetTouches[0];this.touchX=t.clientX,this.ready_moved=!1}}},{key:"touchend",value:function(e){e.preventDefault();var t=(this.touchX,this);if(!t.ready_moved){var n=e.changedTouches[0],i=n.clientX,s=i-t.touchX;s>50?(t.pre(),t.ready_moved=!0):s<-50&&(t.next(),t.ready_moved=!0)}}}]),e}()},function(e,t,n){"use strict";function i(){var e=Array.from(document.querySelectorAll(".lazyload"));if("IntersectionObserver"in window){var t=new IntersectionObserver(function(e){e.forEach(function(e){e.intersectionRatio>0&&o(e.target,function(){t.unobserve(e.target)})})});e.forEach(function(e){t.observe(e)})}else{var n=s(function(){e=e.filter(function(e){return e.classList.contains("lazyload")}),e.forEach(function(e){return r(e)&&o(e)}),0===e.length&&window.removeEventListener("scroll",n),e.forEach(function(e){return r(e)&&o(e)})},300);window.addEventListener("scroll",n),window.dispatchEvent(new Event("scroll"))}}function s(e,t){var n=void 0,i=void 0,s=void 0,r=0;return function o(){var a=+new Date,c=a-r;n=this,i=arguments,!r||c>=t?(e.apply(n,i),r=a):c<t&&(clearTimeout(s),s=setTimeout(o,t-c))}}function r(e){var t=e.getBoundingClientRect(),n=t.top,i=t.left,s=t.right,r=t.bottom,o=document.documentElement.clientWidth,a=document.documentElement.clientHeight;return(n>0&&n<a||r>0&&r<a)&&(i>0&&i<o||s>0&&s<o)}function o(e,t){var n=new Image;n.src=e.dataset.src,n.onload=function(){e.src=n.src,e.classList.remove("lazyload"),"[object Function]"===Object.prototype.toString.call(t)&&t()}}Object.defineProperty(t,"__esModule",{value:!0}),t.lazyload=i},function(e,t,n){"use strict";document.addEventListener("touchstart",function(e){var t=e.target;if("tab"===t.dataset.role){[].forEach.call(t.parentElement.children,function(e){e.classList.remove("active")}),t.classList.add("active");var n=document.querySelector(t.dataset.view);n&&([].forEach.call(n.parentElement.children,function(e){e.style.display="none"}),n.style.display="block")}})}]);
//# sourceMappingURL=app.js.map